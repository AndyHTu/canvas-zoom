{"version":3,"file":"index-21aedf01.js","sources":["../../../../js/icons/src/Brush.svelte","../../../../js/icons/src/Color.svelte","../../../../js/icons/src/Erase.svelte","../../../../js/icons/src/Sketch.svelte","../../../../js/image/src/utils.ts","../../../../js/image/src/Cropper.svelte","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/Point.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyPoint.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyBrush.js","../../../../js/image/src/Brushcolor.js","../../../../js/image/src/Sketch.svelte","../../../../js/image/src/ModifySketch.svelte","../../../../js/image/src/SketchSettings.svelte","../../../../js/image/src/Image.svelte","../../../../js/image/src/StaticImage.svelte","../../../../js/app/src/components/Image/Image.svelte","../../../../js/app/src/components/Image/index.ts"],"sourcesContent":["<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\n\t<path\n\t\td=\"M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z\"\n\t\tfill=\"currentColor\"\n\t/>\n\t<path\n\t\td=\"M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z\"\n\t\tfill=\"currentColor\"\n\t/>\n</svg>\n","<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\n\t<circle cx=\"10\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"16\" cy=\"9\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"22\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"23\" cy=\"18\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"19\" cy=\"23\" r=\"2\" fill=\"currentColor\" />\n\t<path\n\t\tfill=\"currentColor\"\n\t\td=\"M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z\"\n\t/>\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 32 32\"\n\t><path\n\t\tfill=\"currentColor\"\n\t\td=\"M7 27h23v2H7zm20.38-16.49l-7.93-7.92a2 2 0 0 0-2.83 0l-14 14a2 2 0 0 0 0 2.83L7.13 24h9.59l10.66-10.66a2 2 0 0 0 0-2.83zM15.89 22H8l-4-4l6.31-6.31l7.93 7.92zm3.76-3.76l-7.92-7.93L18 4l8 7.93z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-edit-2\"\n>\n\t<path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\" />\n</svg>\n","export const get_coordinates_of_clicked_image = (\r\n\tevt: MouseEvent\r\n): [number, number] | null => {\r\n\tlet image = evt.currentTarget as HTMLImageElement;\r\n\r\n\tconst imageRect = image.getBoundingClientRect();\r\n\tconst xScale = image.naturalWidth / imageRect.width;\r\n\tconst yScale = image.naturalHeight / imageRect.height;\r\n\tif (xScale > yScale) {\r\n\t\tconst displayed_width = imageRect.width;\r\n\t\tconst displayed_height = image.naturalHeight / xScale;\r\n\t\tconst y_offset = (imageRect.height - displayed_height) / 2;\r\n\t\tvar x = Math.round((evt.clientX - imageRect.left) * xScale);\r\n\t\tvar y = Math.round((evt.clientY - imageRect.top - y_offset) * xScale);\r\n\t} else {\r\n\t\tconst displayed_width = image.naturalWidth / yScale;\r\n\t\tconst displayed_height = imageRect.height;\r\n\t\tconst x_offset = (imageRect.width - displayed_width) / 2;\r\n\t\tvar x = Math.round((evt.clientX - imageRect.left - x_offset) * yScale);\r\n\t\tvar y = Math.round((evt.clientY - imageRect.top) * yScale);\r\n\t}\r\n\tif (x < 0 || x >= image.naturalWidth || y < 0 || y >= image.naturalHeight) {\r\n\t\treturn null;\r\n\t}\r\n\treturn [x, y];\r\n};\r\n","<svelte:options accessors={true} />\r\n\r\n<script lang=\"ts\">\r\n\timport Cropper from \"cropperjs\";\r\n\timport { onMount, createEventDispatcher } from \"svelte\";\r\n\r\n\texport let image: string;\r\n\tlet el: HTMLImageElement;\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\tlet cropper: Cropper;\r\n\r\n\texport function destroy() {\r\n\t\tcropper.destroy();\r\n\t}\r\n\r\n\texport function create() {\r\n\t\tif (cropper) {\r\n\t\t\tdestroy();\r\n\t\t}\r\n\t\tcropper = new Cropper(el, {\r\n\t\t\tautoCropArea: 1,\r\n\t\t\tcropend() {\r\n\t\t\t\tconst image_data = cropper.getCroppedCanvas().toDataURL();\r\n\t\t\t\tdispatch(\"crop\", image_data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdispatch(\"crop\", image);\r\n\t}\r\n</script>\r\n\r\n<img src={image} bind:this={el} alt=\"\" />\r\n","class Point {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport default Point\n","import Point from './Point'\n\nclass LazyPoint extends Point {\n  /**\n   * Update the x and y values\n   *\n   * @param {Point} point\n   */\n  update (point) {\n    this.x = point.x\n    this.y = point.y\n  }\n\n  /**\n   * Move the point to another position using an angle and distance\n   *\n   * @param {number} angle The angle in radians\n   * @param {number} distance How much the point should be moved\n   */\n  moveByAngle (angle, distance) {\n    // Rotate the angle based on the browser coordinate system ([0,0] in the top left)\n    const angleRotated = angle + (Math.PI / 2)\n\n    this.x = this.x + (Math.sin(angleRotated) * distance),\n    this.y = this.y - (Math.cos(angleRotated) * distance)\n  }\n\n  /**\n   * Check if this point is the same as another point\n   *\n   * @param {Point} point\n   * @returns {boolean}\n   */\n  equalsTo (point) {\n    return this.x === point.x && this.y === point.y\n  }\n\n  /**\n   * Get the difference for x and y axis to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDifferenceTo (point) {\n    return new Point(this.x - point.x, this.y - point.y)\n  }\n\n  /**\n   * Calculate distance to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDistanceTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.sqrt(Math.pow(diff.x, 2) + Math.pow(diff.y, 2))\n  }\n\n  /**\n   * Calculate the angle to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getAngleTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.atan2(diff.y, diff.x)\n  }\n\n  /**\n   * Return a simple object with x and y properties\n   *\n   * @returns {object}\n   */\n  toObject () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  }\n}\n\nexport default LazyPoint\n","import LazyPoint from './LazyPoint'\nconst RADIUS_DEFAULT = 30\n\nclass LazyBrush {\n  /**\n   * constructor\n   *\n   * @param {object} settings\n   * @param {number} settings.radius The radius for the lazy area\n   * @param {boolean} settings.enabled\n   */\n  constructor ({ radius = RADIUS_DEFAULT, enabled = true, initialPoint = { x: 0, y: 0 }} = {}) {\n    this.radius = radius\n    this._isEnabled = enabled\n\n    this.pointer = new LazyPoint(initialPoint.x, initialPoint.y)\n    this.brush = new LazyPoint(initialPoint.x, initialPoint.y)\n\n    this.angle = 0\n    this.distance = 0\n    this._hasMoved = false\n  }\n\n  /**\n   * Enable lazy brush calculations.\n   *\n   */\n  enable () {\n    this._isEnabled = true\n  }\n\n  /**\n   * Disable lazy brush calculations.\n   *\n   */\n  disable () {\n    this._isEnabled = false\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isEnabled () {\n    return this._isEnabled\n  }\n\n  /**\n   * Update the radius\n   *\n   * @param {number} radius\n   */\n  setRadius (radius) {\n    this.radius = radius\n  }\n\n  /**\n   * Return the current radius\n   *\n   * @returns {number}\n   */\n  getRadius () {\n    return this.radius\n  }\n\n  /**\n   * Return the brush coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getBrushCoordinates () {\n    return this.brush.toObject()\n  }\n\n  /**\n   * Return the pointer coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getPointerCoordinates () {\n    return this.pointer.toObject()\n  }\n\n  /**\n   * Return the brush as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getBrush () {\n    return this.brush\n  }\n\n  /**\n   * Return the pointer as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getPointer () {\n    return this.pointer\n  }\n\n  /**\n   * Return the angle between pointer and brush\n   *\n   * @returns {number} Angle in radians\n   */\n  getAngle () {\n    return this.angle\n  }\n\n  /**\n   * Return the distance between pointer and brush\n   *\n   * @returns {number} Distance in pixels\n   */\n  getDistance () {\n    return this.distance\n  }\n\n  /**\n   * Return if the previous update has moved the brush.\n   *\n   * @returns {boolean} Whether the brush moved previously.\n   */\n  brushHasMoved () {\n    return this._hasMoved\n  }\n\n  /**\n   * Updates the pointer point and calculates the new brush point.\n   *\n   * @param {Point} newPointerPoint\n   * @param {Object} options\n   * @param {Boolean} options.both Force update pointer and brush\n   * @returns {Boolean} Whether any of the two points changed\n   */\n  update (newPointerPoint, { both = false } = {}) {\n    this._hasMoved = false\n    if (this.pointer.equalsTo(newPointerPoint) && !both) {\n      return false\n    }\n\n    this.pointer.update(newPointerPoint)\n\n    if (both) {\n      this._hasMoved = true\n      this.brush.update(newPointerPoint)\n      return true\n    }\n\n    if (this._isEnabled) {\n      this.distance = this.pointer.getDistanceTo(this.brush)\n      this.angle = this.pointer.getAngleTo(this.brush)\n\n      if (this.distance > this.radius) {\n        this.brush.moveByAngle(this.angle, this.distance - this.radius)\n        this._hasMoved = true\n      }\n    } else {\n      this.distance = 0\n      this.angle = 0\n      this.brush.update(newPointerPoint)\n      this._hasMoved = true\n    }\n\n    return true\n  }\n}\n\nexport default LazyBrush\n\n","import { writable } from \"svelte/store\";\r\n\r\nexport const brush_color_store = writable(\"#000000\");\r\n","<script>\r\n  // @ts-nocheck\r\n\r\n  import { onMount, onDestroy, createEventDispatcher, tick } from \"svelte\";\r\n  import { fade } from \"svelte/transition\";\r\n  import { LazyBrush } from \"lazy-brush/src\";\r\n  import { brush_color_store } from \"./Brushcolor\";\r\n  import ResizeObserver from \"resize-observer-polyfill\";\r\n\r\n  const dispatch = createEventDispatcher();\r\n\r\n  export let value;\r\n  export let value_img;\r\n  export let mode = \"sketch\";\r\n  export let brush_color = \"#0b0f19\";\r\n  export let brush_radius;\r\n  export let source;\r\n\r\n  export let width = 400;\r\n  export let height = 200;\r\n  export let container_height = 200;\r\n  export let shape;\r\n\r\n  let colorPickerEnabled = localStorage.setItem(\"colorPickerEnable\", false);\r\n  let transparentMask = localStorage.setItem(\"transparentMask\", false);\r\n  let posX = 0;\r\n  let posY = 0;\r\n\r\n  $: {\r\n    if (shape && (width || height)) {\r\n      width = shape[0];\r\n      height = shape[1];\r\n    }\r\n  }\r\n\r\n  let mounted;\r\n  let isMaskMode;\r\n\r\n  let catenary_color = \"#aaa\";\r\n\r\n  let canvas_width = width;\r\n  let canvas_height = height;\r\n\r\n  $: mounted && !value && clear();\r\n\r\n  let last_value_img;\r\n\r\n  $: {\r\n    if (mounted && value_img !== last_value_img) {\r\n      last_value_img = value_img;\r\n\r\n      clear();\r\n\r\n      setTimeout(() => {\r\n        if (source === \"webcam\") {\r\n          ctx.temp.save();\r\n          ctx.temp.translate(width, 0);\r\n          ctx.temp.scale(-1, 1);\r\n          ctx.temp.drawImage(value_img, 0, 0);\r\n          ctx.temp.restore();\r\n        } else {\r\n          draw_cropped_image();\r\n        }\r\n\r\n        ctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n        draw_lines({ lines: lines.slice() });\r\n        trigger_on_change();\r\n      }, 50);\r\n    }\r\n  }\r\n\r\n  function mid_point(p1, p2) {\r\n    return {\r\n      x: p1.x + (p2.x - p1.x) / 2,\r\n      y: p1.y + (p2.y - p1.y) / 2,\r\n    };\r\n  }\r\n\r\n  const canvas_types = [\r\n    {\r\n      name: \"interface\",\r\n      zIndex: 15,\r\n    },\r\n    {\r\n      name: \"drawing\",\r\n      zIndex: 11,\r\n    },\r\n    {\r\n      name: \"temp\",\r\n      zIndex: 12,\r\n    },\r\n    {\r\n      name: \"mask\",\r\n      zIndex: -1,\r\n    },\r\n    {\r\n      name: \"temp_fake\",\r\n      zIndex: -2,\r\n    },\r\n  ];\r\n\r\n  let canvas = {};\r\n  let ctx = {};\r\n  let points = [];\r\n  let lines = [];\r\n  let mouse_has_moved = true;\r\n  let values_changed = true;\r\n  let is_drawing = false;\r\n  let is_pressing = false;\r\n  let lazy = null;\r\n  let canvas_container = null;\r\n  let canvas_observer = null;\r\n  let line_count = 0;\r\n\r\n  if (mode === \"mask\"){\r\n    if(localStorage.getItem(\"brush_color\")){\r\n      brush_color = localStorage.getItem(\"brush_color\")\r\n    }\r\n  }\r\n\r\n  function draw_cropped_image() {\r\n    if (!shape) {\r\n      ctx.temp.drawImage(value_img, 0, 0, width, height);\r\n      return;\r\n    }\r\n\r\n    let _width = value_img.naturalWidth;\r\n    let _height = value_img.naturalHeight;\r\n\r\n    const shape_ratio = shape[0] / shape[1];\r\n    const image_ratio = _width / _height;\r\n\r\n    let x = 0;\r\n    let y = 0;\r\n\r\n    if (shape_ratio < image_ratio) {\r\n      _width = shape[1] * image_ratio;\r\n      _height = shape[1];\r\n      x = (shape[0] - _width) / 2;\r\n    } else if (shape_ratio > image_ratio) {\r\n      _width = shape[0];\r\n      _height = shape[0] / image_ratio;\r\n      y = (shape[1] - _height) / 2;\r\n    } else {\r\n      x = 0;\r\n      y = 0;\r\n      _width = shape[0];\r\n      _height = shape[1];\r\n    }\r\n\r\n    ctx.temp.drawImage(value_img, x, y, _width, _height);\r\n  }\r\n\r\n  onMount(async () => {\r\n    Object.keys(canvas).forEach((key) => {\r\n      ctx[key] = canvas[key].getContext(\"2d\");\r\n    });\r\n\r\n    await tick();\r\n\r\n    if (value_img) {\r\n      value_img.addEventListener(\"load\", (_) => {\r\n        if (source === \"webcam\") {\r\n          ctx.temp.save();\r\n          ctx.temp.translate(width, 0);\r\n          ctx.temp.scale(-1, 1);\r\n          ctx.temp.drawImage(value_img, 0, 0);\r\n          ctx.temp.restore();\r\n        } else {\r\n          draw_cropped_image();\r\n        }\r\n        ctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n        trigger_on_change();\r\n      });\r\n\r\n      setTimeout(() => {\r\n        if (source === \"webcam\") {\r\n          ctx.temp.save();\r\n          ctx.temp.translate(width, 0);\r\n          ctx.temp.scale(-1, 1);\r\n          ctx.temp.drawImage(value_img, 0, 0);\r\n          ctx.temp.restore();\r\n        } else {\r\n          draw_cropped_image();\r\n        }\r\n\r\n        ctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n        draw_lines({ lines: lines.slice() });\r\n        trigger_on_change();\r\n      }, 100);\r\n    }\r\n\r\n    lazy = new LazyBrush({\r\n      radius: brush_radius * 0.05,\r\n      enabled: true,\r\n      initialPoint: {\r\n        x: width / 2,\r\n        y: height / 2,\r\n      },\r\n    });\r\n\r\n    canvas_observer = new ResizeObserver((entries, observer, ...rest) => {\r\n      handle_canvas_resize(entries, observer);\r\n    });\r\n    canvas_observer.observe(canvas_container);\r\n\r\n    loop();\r\n    mounted = true;\r\n\r\n    requestAnimationFrame(() => {\r\n      init();\r\n      requestAnimationFrame(() => {\r\n        clear();\r\n      });\r\n    });\r\n  });\r\n\r\n  function init() {\r\n    const initX = width / 2;\r\n    const initY = height / 2;\r\n    lazy.update({ x: initX, y: initY }, { both: true });\r\n    lazy.update({ x: initX, y: initY }, { both: false });\r\n    mouse_has_moved = true;\r\n    values_changed = true;\r\n  }\r\n\r\n  onDestroy(() => {\r\n    mounted = false;\r\n    canvas_observer.unobserve(canvas_container);\r\n  });\r\n\r\n  export function redraw() {\r\n    clear_canvas();\r\n    if (value_img) {\r\n      draw_cropped_image();\r\n    }\r\n    if (lines.length == 0) {\r\n      dispatch(\"clear\");\r\n    }\r\n    line_count = lines.length;\r\n    draw_lines({ lines: lines }, true);\r\n    trigger_on_change();\r\n  }\r\n\r\n  function redraw_image(_lines) {\r\n    clear_canvas();\r\n\r\n    if (value_img) {\r\n      if (source === \"webcam\") {\r\n        ctx.temp.save();\r\n        ctx.temp.translate(width, 0);\r\n        ctx.temp.scale(-1, 1);\r\n        ctx.temp.drawImage(value_img, 0, 0);\r\n        ctx.temp.restore();\r\n      } else {\r\n        draw_cropped_image();\r\n      }\r\n\r\n      if (!lines || !lines.length) {\r\n        ctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n      }\r\n    }\r\n\r\n    draw_lines({ lines: _lines });\r\n    line_count = _lines.length;\r\n\r\n    if (lines.length) {\r\n      lines = _lines;\r\n    }\r\n\r\n    if (lines.length == 0) {\r\n      dispatch(\"clear\");\r\n    }\r\n  }\r\n\r\n  export function clear_mask() {\r\n    const _lines = [];\r\n\r\n    redraw_image(_lines);\r\n    trigger_on_change();\r\n  }\r\n\r\n  export function undo() {\r\n    const _lines = lines.slice(0, -1);\r\n\r\n    redraw_image(_lines);\r\n    trigger_on_change();\r\n  }\r\n\r\n  let get_save_data = () => {\r\n    return JSON.stringify({\r\n      lines: lines,\r\n      width: canvas_width,\r\n      height: canvas_height,\r\n    });\r\n  };\r\n\r\n  let draw_lines = ({ lines }) => {\r\n    const brushMain = brush_color;\r\n    lines.forEach((line) => {\r\n      let { points: _points, brush_color, brush_radius } = line;\r\n\r\n      if (mode === \"mask\") {\r\n        draw_points({\r\n          points: _points,\r\n          brush_color: brushMain,\r\n          brush_radius,\r\n        });\r\n      } else {\r\n        draw_points({\r\n          points: _points,\r\n          brush_color,\r\n          brush_radius,\r\n        });\r\n      }\r\n\r\n      if (mode === \"mask\") {\r\n        draw_fake_points({\r\n          points: _points,\r\n          brush_color: brushMain,\r\n          brush_radius,\r\n        });\r\n      }\r\n\r\n      points = _points;\r\n\r\n      return;\r\n    });\r\n    saveLine({ brush_color, brush_radius });\r\n\r\n    if (mode === \"mask\") {\r\n      save_mask_line();\r\n    }\r\n  };\r\n\r\n  let handle_draw_start = (e) => {\r\n    e.preventDefault();\r\n    const { x, y } = get_pointer_pos(e);\r\n\r\n    if (!e.touches && e.button !== 0) return;\r\n\r\n    colorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n\r\n    if (colorPickerEnabled && mode !== \"mask\") {\r\n      brush_color = getPixelColor(x, y);\r\n      const brush_color_hex = rgbToHex(brush_color);\r\n      brush_color_store.set(brush_color_hex);\r\n      localStorage.setItem(\"colorPickerEnable\", \"false\");\r\n      return;\r\n    }\r\n    is_pressing = true;\r\n\r\n    if (e.touches && e.touches.length > 0) {\r\n      lazy.update({ x, y }, { both: true });\r\n    }\r\n\r\n    handle_pointer_move(x, y);\r\n    line_count += 1;\r\n  };\r\n\r\n  let handle_draw_move = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (localStorage.getItem(\"resetLines\") === \"true\" && lines.length > 0) {\r\n      localStorage.setItem(\"resetLines\", \"false\");\r\n      clear_mask();\r\n    } else {\r\n      localStorage.setItem(\"resetLines\", \"false\");\r\n    }\r\n\r\n    if (localStorage.getItem(\"fillCanvasBrushColor\") === \"true\") {\r\n      fill_canvas_color();\r\n      localStorage.setItem(\"fillCanvasBrushColor\", false);\r\n    }\r\n\r\n    const { x, y } = get_pointer_pos(e);\r\n    posX = x;\r\n    posY = y;\r\n    handle_pointer_move(x, y);\r\n    localStorage.setItem(\"overCanvas\", \"true\");\r\n  };\r\n\r\n  let handle_draw_end = (e) => {\r\n    e.preventDefault();\r\n    handle_draw_move(e);\r\n    is_drawing = false;\r\n    is_pressing = false;\r\n    saveLine();\r\n\r\n    transparentMask = localStorage.getItem(\"transparentMask\") === \"true\";\r\n    if (transparentMask) {\r\n      redraw();\r\n    }\r\n\r\n    if (mode === \"mask\") {\r\n      save_mask_line();\r\n    }\r\n  };\r\n\r\n  let old_width = 0;\r\n  let old_height = 0;\r\n  let old_container_height = 0;\r\n  let add_lr_border = false;\r\n\r\n  let handle_canvas_resize = async () => {\r\n    if (shape && canvas_container) {\r\n      const x = canvas_container?.getBoundingClientRect();\r\n      const shape_ratio = shape[0] / shape[1];\r\n      const container_ratio = x.width / x.height;\r\n      add_lr_border = shape_ratio < container_ratio;\r\n    }\r\n\r\n    if (width === old_width && height === old_height && old_container_height === container_height) {\r\n      return;\r\n    }\r\n    const dimensions = { width: width, height: height };\r\n\r\n    const container_dimensions = {\r\n      height: container_height,\r\n      width: container_height * (dimensions.width / dimensions.height),\r\n    };\r\n\r\n    await Promise.all([\r\n      set_canvas_size(canvas.interface, dimensions, container_dimensions),\r\n      set_canvas_size(canvas.drawing, dimensions, container_dimensions),\r\n      set_canvas_size(canvas.temp, dimensions, container_dimensions),\r\n      set_canvas_size(canvas.temp_fake, dimensions, container_dimensions),\r\n      set_canvas_size(canvas.mask, dimensions, container_dimensions, false),\r\n    ]);\r\n\r\n    if (!brush_radius) {\r\n      brush_radius = 20 * (dimensions.width / container_dimensions.width);\r\n    }\r\n\r\n    loop({ once: true });\r\n\r\n    setTimeout(() => {\r\n      old_height = height;\r\n      old_width = width;\r\n      old_container_height = container_height;\r\n    }, 10);\r\n    await tick();\r\n\r\n    clear();\r\n  };\r\n\r\n  $: {\r\n    if (lazy) {\r\n      init();\r\n      lazy.setRadius(brush_radius * 0.05);\r\n    }\r\n  }\r\n\r\n  $: {\r\n    if (width || height) {\r\n      handle_canvas_resize();\r\n    }\r\n  }\r\n\r\n  let set_canvas_size = async (canvas, dimensions, container, scale = true) => {\r\n    if (!mounted) return;\r\n    await tick();\r\n\r\n    const dpr = window.devicePixelRatio || 1;\r\n    canvas.width = dimensions.width * (scale ? dpr : 1);\r\n    canvas.height = dimensions.height * (scale ? dpr : 1);\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    scale && ctx.scale(dpr, dpr);\r\n\r\n    canvas.style.width = `${container.width}px`;\r\n    canvas.style.height = `${container.height}px`;\r\n  };\r\n\r\n  let get_pointer_pos = (e) => {\r\n    const rect = canvas.interface.getBoundingClientRect();\r\n\r\n    let clientX = e.clientX;\r\n    let clientY = e.clientY;\r\n    if (e.changedTouches && e.changedTouches.length > 0) {\r\n      clientX = e.changedTouches[0].clientX;\r\n      clientY = e.changedTouches[0].clientY;\r\n    }\r\n\r\n    return {\r\n      x: ((clientX - rect.left) / rect.width) * width,\r\n      y: ((clientY - rect.top) / rect.height) * height,\r\n    };\r\n  };\r\n\r\n  function toggleColorPicker() {\r\n    colorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n    if (colorPickerEnabled && mode !== \"mask\") {\r\n      for (const key in canvas) {\r\n        canvas[key].style.cursor = \"crosshair\";\r\n      }\r\n    } else {\r\n      for (const key in canvas) {\r\n        canvas[key].style.cursor = \"none\";\r\n      }\r\n    }\r\n  }\r\n\r\n  let handle_pointer_move = (x, y) => {\r\n    colorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n    toggleColorPicker();\r\n    if (colorPickerEnabled && mode !== \"mask\") {\r\n      return;\r\n    }\r\n\r\n    lazy.update({ x: x, y: y });\r\n\r\n    const is_disabled = !lazy.isEnabled();\r\n    if ((is_pressing && !is_drawing) || (is_disabled && is_pressing)) {\r\n      is_drawing = true;\r\n      points.push(lazy.brush.toObject());\r\n    }\r\n    if (is_drawing) {\r\n      points.push(lazy.brush.toObject());\r\n      draw_points({\r\n        points: points,\r\n        brush_color,\r\n        brush_radius,\r\n      });\r\n\r\n      if (mode === \"mask\") {\r\n        draw_fake_points({\r\n          points: points,\r\n          brush_color,\r\n          brush_radius,\r\n        });\r\n      }\r\n    }\r\n    mouse_has_moved = true;\r\n  };\r\n\r\n  let draw_points = ({ points, brush_color, brush_radius }) => {\r\n    if (!points || points.length < 2) return;\r\n    ctx.temp.lineJoin = \"round\";\r\n    ctx.temp.lineCap = \"round\";\r\n\r\n    ctx.temp.strokeStyle = brush_color;\r\n    ctx.temp.lineWidth = brush_radius;\r\n    if (!points || points.length < 2) return;\r\n    let p1 = points[0];\r\n    let p2 = points[1];\r\n    ctx.temp.moveTo(p2.x, p2.y);\r\n    ctx.temp.beginPath();\r\n    for (var i = 1, len = points.length; i < len; i++) {\r\n      var midPoint = mid_point(p1, p2);\r\n      ctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n      p1 = points[i];\r\n      p2 = points[i + 1];\r\n    }\r\n\r\n    ctx.temp.lineTo(p1.x, p1.y);\r\n    ctx.temp.stroke();\r\n  };\r\n\r\n  let draw_fake_points = ({ points, brush_color, brush_radius }) => {\r\n    if (!points || points.length < 2) return;\r\n\r\n    ctx.temp_fake.lineJoin = \"round\";\r\n    ctx.temp_fake.lineCap = \"round\";\r\n    ctx.temp_fake.strokeStyle = \"#fff\";\r\n    ctx.temp_fake.lineWidth = brush_radius;\r\n    let p1 = points[0];\r\n    let p2 = points[1];\r\n    ctx.temp_fake.moveTo(p2.x, p2.y);\r\n    ctx.temp_fake.beginPath();\r\n    for (var i = 1, len = points.length; i < len; i++) {\r\n      var midPoint = mid_point(p1, p2);\r\n      ctx.temp_fake.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n      p1 = points[i];\r\n      p2 = points[i + 1];\r\n    }\r\n\r\n    ctx.temp_fake.lineTo(p1.x, p1.y);\r\n    ctx.temp_fake.stroke();\r\n  };\r\n\r\n  // help funcs\r\n\r\n  function getBrightness(hexColor) {\r\n    const rgbColor = hexToRgb(hexColor);\r\n    if (rgbColor) {\r\n      const { r, g, b } = rgbColor;\r\n      return (r * 299 + g * 587 + b * 114) / 1000;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function getPixelColor(x, y) {\r\n    const imageData = ctx.drawing.getImageData(x - 1, y, 1, 1);\r\n    const [r, g, b, a] = imageData.data;\r\n    return `rgb(${r}, ${g}, ${b})`;\r\n  }\r\n\r\n  function hexToRgb(hex) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result\r\n      ? {\r\n          r: parseInt(result[1], 16),\r\n          g: parseInt(result[2], 16),\r\n          b: parseInt(result[3], 16),\r\n        }\r\n      : null;\r\n  }\r\n\r\n  function rgbToHex(rgbString) {\r\n    // Extracting r, g, b values from a string\r\n    const [r, g, b] = rgbString\r\n      .match(/\\d+/g) // Find all the numbers in the string\r\n      .map(Number); // Convert each group of digits to a numeric value\r\n\r\n    // Function to convert a number to a two-digit hexadecimal value\r\n    function toHex(num) {\r\n      const hex = num.toString(16);\r\n      return hex.length === 1 ? `0${hex}` : hex;\r\n    }\r\n\r\n    // Convert each r, g, b value to hexadecimal format and combine them\r\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\r\n  }\r\n\r\n  // end\r\n\r\n  let save_mask_line = () => {\r\n    if (points.length < 1) return;\r\n    points.length = 0;\r\n    ctx.mask.drawImage(canvas.temp_fake, 0, 0, width, height);\r\n\r\n    trigger_on_change();\r\n  };\r\n\r\n  let saveLine = () => {\r\n    if (points.length < 1) return;\r\n\r\n    lines.push({\r\n      points: points.slice(),\r\n      brush_color: brush_color,\r\n      brush_radius,\r\n    });\r\n\r\n    if (mode !== \"mask\") {\r\n      points.length = 0;\r\n    }\r\n\r\n    ctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n    trigger_on_change();\r\n  };\r\n\r\n  let trigger_on_change = () => {\r\n    const x = get_image_data();\r\n    dispatch(\"change\", x);\r\n  };\r\n\r\n  export function clear() {\r\n    lines = [];\r\n    clear_canvas();\r\n    line_count = 0;\r\n\r\n    return true;\r\n  }\r\n\r\n  function clear_canvas() {\r\n    values_changed = true;\r\n    ctx.temp.clearRect(0, 0, width, height);\r\n\r\n    ctx.temp.fillStyle = mode === \"mask\" ? \"transparent\" : \"#FFFFFF\";\r\n    ctx.temp.fillRect(0, 0, width, height);\r\n\r\n    if (mode === \"mask\") {\r\n      ctx.temp_fake.clearRect(0, 0, canvas.temp_fake.width, canvas.temp_fake.height);\r\n      ctx.mask.clearRect(0, 0, width, height);\r\n      ctx.mask.fillStyle = \"#000\";\r\n      ctx.mask.fillRect(0, 0, width, height);\r\n    }\r\n  }\r\n\r\n  function fill_canvas_color() {\r\n    if (mode === \"mask\") {\r\n      return;\r\n    }\r\n\r\n    ctx.temp.fillStyle = brush_color;\r\n    ctx.temp.fillRect(0, 0, width, height);\r\n\r\n    var startX = 0; // start point of the line (x-coordinate)\r\n    var startY = height / 2; // start point of the line (y-coordinate)\r\n    var endX = width; // end point of the line (x-coordinate)\r\n    var endY = height / 2; // end point of the line (y-coordinate)\r\n\r\n    ctx.drawing.beginPath();\r\n    ctx.drawing.moveTo(startX, startY);\r\n    ctx.drawing.lineTo(endX, endY);\r\n    ctx.drawing.strokeStyle = brush_color;\r\n    ctx.drawing.lineWidth = height; // make the line height of the canvas\r\n    ctx.drawing.stroke();\r\n\r\n    // Save line as two points in the lines array\r\n    lines = [\r\n      {\r\n        points: [\r\n          { x: startX, y: startY },\r\n          { x: endX, y: endY },\r\n        ],\r\n        brush_color: brush_color,\r\n        brush_radius: height,\r\n      },\r\n    ];\r\n    line_count = 1;\r\n\r\n    saveLine();\r\n  }\r\n\r\n  let loop = ({ once = false } = {}) => {\r\n    if (mouse_has_moved || values_changed) {\r\n      const pointer = lazy.getPointerCoordinates();\r\n      const brush = lazy.getBrushCoordinates();\r\n      draw_interface(ctx.interface, pointer, brush);\r\n      mouse_has_moved = false;\r\n      values_changed = false;\r\n    }\r\n    if (!once) {\r\n      window.requestAnimationFrame(() => {\r\n        loop();\r\n      });\r\n    }\r\n  };\r\n\r\n  $: brush_dot = brush_radius * 0.075;\r\n\r\n  let draw_interface = (ctx, pointer, brush) => {\r\n    ctx.clearRect(0, 0, width, height);\r\n\r\n    let brushX = brush.x;\r\n    let brushY = brush.y;\r\n\r\n    if (posX && posY) {\r\n      brushX = posX;\r\n      brushY = posY;\r\n    }\r\n    // brush preview\r\n    ctx.beginPath();\r\n    ctx.fillStyle = brush_color;\r\n\r\n    const brushOutlineEnabled = localStorage.getItem(\"brushOutline\") === \"true\";\r\n    if (brushOutlineEnabled) {\r\n      const brightness = getBrightness(brush_color);\r\n      ctx.strokeStyle = brightness > 128 ? \"black\" : \"white\"; // Change the strokeStyle based on brightness\r\n      if (brush_radius > 180) {\r\n        ctx.lineWidth = 4;\r\n      } else if (brush_radius > 80) {\r\n        ctx.lineWidth = 3; // Change the value to control the thickness of the border\r\n      } else if (brush_radius > 20) {\r\n        ctx.lineWidth = 2; // Change the value to control the thickness of the border\r\n      } else {\r\n        ctx.lineWidth = 1;\r\n      }\r\n    }\r\n\r\n    ctx.arc(brushX, brushY, brush_radius / 2, 0, Math.PI * 2, true);\r\n    ctx.fill(); // Filling the main point\r\n\r\n    if (brushOutlineEnabled) {\r\n      ctx.stroke(); // Main Point Boundary\r\n    }\r\n\r\n    // tiny brush point dot\r\n    ctx.beginPath();\r\n    ctx.fillStyle = catenary_color;\r\n    ctx.arc(brushX, brushY, brush_dot, 0, Math.PI * 2, true);\r\n    ctx.fill();\r\n  };\r\n\r\n  export function get_image_data() {\r\n    return mode === \"mask\" ? canvas.mask.toDataURL(\"image/jpg\") : canvas.drawing.toDataURL(\"image/jpg\");\r\n  }\r\n</script>\r\n\r\n<div class=\"wrap\" bind:this={canvas_container} bind:offsetWidth={canvas_width} bind:offsetHeight={canvas_height}>\r\n  {#if line_count === 0}\r\n    <div transition:fade={{ duration: 50 }} class=\"start-prompt\">Start drawing</div>\r\n  {/if}\r\n  {#each canvas_types as { name, zIndex }}\r\n    <canvas\r\n      key={name}\r\n      style=\" z-index:{zIndex};\"\r\n      class:lr={add_lr_border}\r\n      class:tb={!add_lr_border}\r\n      bind:this={canvas[name]}\r\n      on:mousedown={name === \"interface\" ? handle_draw_start : undefined}\r\n      on:mousemove={name === \"interface\" ? handle_draw_move : undefined}\r\n      on:mouseup={name === \"interface\" ? handle_draw_end : undefined}\r\n      on:mouseout={name === \"interface\" ? handle_draw_end : undefined}\r\n      on:mouseout={name === \"interface\"\r\n        ? () => {\r\n            posX = posY = 0;\r\n            localStorage.setItem(\"overCanvas\", \"false\");\r\n          }\r\n        : undefined}\r\n      on:blur={name === \"interface\" ? handle_draw_end : undefined}\r\n      on:touchstart={name === \"interface\" ? handle_draw_start : undefined}\r\n      on:touchmove={name === \"interface\" ? handle_draw_move : undefined}\r\n      on:touchend={name === \"interface\" ? handle_draw_end : undefined}\r\n      on:touchcancel={name === \"interface\" ? handle_draw_end : undefined}\r\n      on:click|stopPropagation\r\n    />\r\n  {/each}\r\n</div>\r\n\r\n<style>\r\n  canvas {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0px;\r\n    right: 0px;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    margin: auto;\r\n  }\r\n\r\n  .lr {\r\n    border-right: 1px solid var(--border-color-primary);\r\n    border-left: 1px solid var(--border-color-primary);\r\n  }\r\n\r\n  .tb {\r\n    border-top: 1px solid var(--border-color-primary);\r\n    border-bottom: 1px solid var(--border-color-primary);\r\n  }\r\n\r\n  canvas:not(.color-picker-enabled):hover {\r\n    cursor: none;\r\n  }\r\n\r\n  canvas.color-picker-enabled:hover {\r\n    cursor: crosshair;\r\n  }\r\n\r\n  .wrap {\r\n    position: relative;\r\n    width: var(--size-full);\r\n    height: var(--size-full);\r\n    touch-action: none;\r\n  }\r\n\r\n  .start-prompt {\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0px;\r\n    right: 0px;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: var(--layer-4);\r\n    touch-action: none;\r\n    pointer-events: none;\r\n    color: var(--body-text-color-subdued);\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n  import { createEventDispatcher } from \"svelte\";\r\n  import { IconButton } from \"@gradio/atoms\";\r\n  import { Undo, Clear, Copy, Erase } from \"@gradio/icons\";\r\n  const dispatch = createEventDispatcher();\r\n</script>\r\n\r\n<div>\r\n  <IconButton Icon={Undo} label=\"Undo\" on:click={() => dispatch(\"undo\")} />\r\n  <span class=\"hide_redraw\">\r\n    <IconButton Icon={Copy} label=\"Redraw\" on:click={() => dispatch(\"redraw\")} />\r\n  </span>\r\n\r\n  {#if true}\r\n    <IconButton\r\n      Icon={Erase}\r\n      label=\"Clear\"\r\n      on:click={(event) => {\r\n        dispatch(\"clear_mask\");\r\n        event.stopPropagation();\r\n      }}\r\n    />\r\n  {/if}\r\n\r\n  <IconButton\r\n    Icon={Clear}\r\n    label=\"Remove Image\"\r\n    on:click={(event) => {\r\n      dispatch(\"remove_image\");\r\n      event.stopPropagation();\r\n    }}\r\n  />\r\n</div>\r\n\r\n<style>\r\n  div {\r\n    display: flex;\r\n    position: absolute;\r\n    top: var(--size-2);\r\n    right: var(--size-2);\r\n    justify-content: flex-end;\r\n    gap: var(--spacing-sm);\r\n    z-index: var(--layer-5);\r\n  }\r\n\r\n  .hide_redraw {\r\n    display: none;\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { IconButton } from \"@gradio/atoms\";\r\n\timport { Brush, Color } from \"@gradio/icons\";\r\n\timport { brush_color_store } from \"./Brushcolor\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\tlet show_size = false;\r\n\tlet show_col = false;\r\n\r\n\texport let brush_radius = 20;\r\n\texport let container_height: number;\r\n\texport let img_width: number;\r\n\texport let img_height: number;\r\n\texport let mode: \"mask\" | \"other\" = \"other\";\r\n\texport let brush_color = \"#000\";\r\n\r\n\tbrush_color_store.subscribe(($brush_color) => {\r\n\t\tbrush_color = $brush_color;\r\n\t});\r\n\r\n\t$: width = container_height * (img_width / img_height);\r\n</script>\r\n\r\n<div class=\"wrap\">\r\n\t<span class=\"brush\">\r\n\t\t<IconButton\r\n\t\t\tIcon={Brush}\r\n\t\t\tlabel=\"Use brush\"\r\n\t\t\ton:click={() => (show_size = !show_size)}\r\n\t\t/>\r\n\t\t{#if show_size}\r\n\t\t\t<input\r\n\t\t\t\taria-label=\"Brush radius\"\r\n\t\t\t\tbind:value={brush_radius}\r\n\t\t\t\ttype=\"range\"\r\n\t\t\t\tmin={0.5 * (img_width / width)}\r\n\t\t\t\tmax={75 * (img_width / width)}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t</span>\r\n\r\n\t{#if true}\r\n\t\t<span class=\"col\">\r\n\t\t\t<IconButton\r\n\t\t\t\tIcon={Color}\r\n\t\t\t\tlabel=\"Select brush color\"\r\n\t\t\t\ton:click={() => (show_col = !show_col)}\r\n\t\t\t/>\r\n\t\t\t{#if show_col}\r\n\t\t\t\t<input\r\n\t\t\t\t\taria-label=\"Brush color\"\r\n\t\t\t\t\ton:change={() => {\r\n\t\t\t\t\t\tif (mode === \"mask\") dispatch(\"redraw\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tbind:value={brush_color}\r\n\t\t\t\t\ttype=\"color\"\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t</span>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: var(--size-10);\r\n\t\tright: var(--size-2);\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: var(--spacing-sm);\r\n\t\tz-index: var(--layer-5);\r\n\t}\r\n\t.brush {\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t.brush input {\r\n\t\tposition: absolute;\r\n\t\ttop: 3px;\r\n\t\tright: calc(100% + 5px);\r\n\t}\r\n\r\n\t.col input {\r\n\t\tposition: absolute;\r\n\t\tright: calc(100% + 5px);\r\n\t\tbottom: -4px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n  // @ts-nocheck\r\n  import { createEventDispatcher, tick, onMount } from \"svelte\";\r\n  import { BlockLabel } from \"@gradio/atoms\";\r\n  import { Image, Sketch as SketchIcon } from \"@gradio/icons\";\r\n  import type { SelectData } from \"@gradio/utils\";\r\n  import { get_coordinates_of_clicked_image } from \"./utils\";\r\n\r\n  import Cropper from \"./Cropper.svelte\";\r\n  import Sketch from \"./Sketch.svelte\";\r\n  import Webcam from \"./Webcam.svelte\";\r\n  import ModifySketch from \"./ModifySketch.svelte\";\r\n  import SketchSettings from \"./SketchSettings.svelte\";\r\n  import { Upload, ModifyUpload } from \"@gradio/upload\";\r\n\r\n  export let value:\r\n    | null\r\n    | string\r\n    | { image: string | null; mask: string | null };\r\n  export let label: string | undefined = undefined;\r\n  export let show_label: boolean;\r\n\r\n  export let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\r\n  export let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\r\n  export let shape: [number, number];\r\n  export let streaming: boolean = false;\r\n  export let pending: boolean = false;\r\n  export let mirror_webcam: boolean;\r\n  export let brush_radius: number;\r\n  export let selectable: boolean = false;\r\n\r\n  let sketch: Sketch;\r\n  let cropper: Cropper;\r\n\r\n  let prevValue = \"\";\r\n  let isUpload = false;\r\n\r\n  if (\r\n    value &&\r\n    (source === \"upload\" || source === \"webcam\") &&\r\n    tool === \"sketch\"\r\n  ) {\r\n    value = { image: value as string, mask: null };\r\n  }\r\n\r\n  function handle_upload({ detail }: CustomEvent<string>) {\r\n    if (tool === \"color-sketch\") {\r\n      static_image = detail;\r\n    } else {\r\n      value =\r\n        (source === \"upload\" || source === \"webcam\") && tool === \"sketch\"\r\n          ? { image: detail, mask: null }\r\n          : detail;\r\n    }\r\n    isUpload = true;\r\n    console.log(1);\r\n    localStorage.setItem(\"resetLines\", \"true\");\r\n    dispatch(\"upload\", detail);\r\n  }\r\n\r\n  function handle_clear({ detail }: CustomEvent<null>) {\r\n    value = null;\r\n    static_image = undefined;\r\n    dispatch(\"clear\");\r\n  }\r\n\r\n  async function handle_save(\r\n    { detail }: { detail: string },\r\n    initial,\r\n    change = false\r\n  ) {\r\n    if (mode === \"mask\") {\r\n      if (source === \"webcam\" && initial) {\r\n        value = {\r\n          image: detail,\r\n          mask: null,\r\n        };\r\n      } else {\r\n        value = {\r\n          image: typeof value === \"string\" ? value : value?.image || null,\r\n          mask: detail,\r\n        };\r\n      }\r\n    } else if (\r\n      (source === \"upload\" || source === \"webcam\") &&\r\n      tool === \"sketch\"\r\n    ) {\r\n      value = { image: detail, mask: null };\r\n    } else {\r\n      if (prevValue === \"\") {\r\n        prevValue = detail;\r\n      }\r\n      value = detail;\r\n    }\r\n    await tick();\r\n    dispatch(streaming ? \"stream\" : \"edit\");\r\n  }\r\n\r\n  const dispatch = createEventDispatcher<{\r\n    change: string | null;\r\n    stream: string | null;\r\n    edit: undefined;\r\n    clear: undefined;\r\n    drag: boolean;\r\n    upload: FileData;\r\n    select: SelectData;\r\n  }>();\r\n\r\n  $: dispatch(\"change\", value as string);\r\n\r\n  let dragging = false;\r\n\r\n  $: dispatch(\"drag\", dragging);\r\n\r\n  function handle_image_load(event: Event) {\r\n    const element = event.currentTarget as HTMLImageElement;\r\n    img_width = element.naturalWidth;\r\n    img_height = element.naturalHeight;\r\n    container_height = element.getBoundingClientRect().height;\r\n  }\r\n\r\n  async function handle_sketch_clear() {\r\n    sketch.clear();\r\n    await tick();\r\n    value = null;\r\n    static_image = undefined;\r\n    prevValue = \"\";\r\n    isUpload = false;\r\n  }\r\n\r\n  async function handle_mask_clear() {\r\n    sketch.clear_mask();\r\n    await tick();\r\n  }\r\n\r\n  let img_height = 0;\r\n  let img_width = 0;\r\n  let container_height = 0;\r\n\r\n  let mode;\r\n\r\n  $: {\r\n    if (source === \"canvas\" && tool === \"sketch\") {\r\n      mode = \"bw-sketch\";\r\n    } else if (tool === \"color-sketch\") {\r\n      mode = \"color-sketch\";\r\n    } else if (\r\n      (source === \"upload\" || source === \"webcam\") &&\r\n      tool === \"sketch\"\r\n    ) {\r\n      mode = \"mask\";\r\n    } else {\r\n      mode = \"editor\";\r\n    }\r\n  }\r\n\r\n  $: brush_color = mode == \"mask\" ? \"#000000\" : \"#000\";\r\n\r\n  let value_img;\r\n  let max_height;\r\n  let max_width;\r\n\r\n  let static_image = undefined;\r\n\r\n  $: {\r\n    if (value === null || (value.image === null && value.mask === null)) {\r\n      static_image = undefined;\r\n    }\r\n  }\r\n\r\n  $: {\r\n    if (cropper) {\r\n      if (value) {\r\n        cropper.image = value;\r\n        cropper.create();\r\n      } else {\r\n        cropper.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  onMount(async () => {\r\n    if (tool === \"color-sketch\" && value && typeof value === \"string\") {\r\n      static_image = value;\r\n      await tick();\r\n      handle_image_load({ currentTarget: value_img });\r\n    }\r\n  });\r\n\r\n  const handle_click = (evt: MouseEvent) => {\r\n    let coordinates = get_coordinates_of_clicked_image(evt);\r\n    if (coordinates) {\r\n      dispatch(\"select\", { index: coordinates, value: null });\r\n    }\r\n  };\r\n</script>\r\n\r\n<BlockLabel\r\n  {show_label}\r\n  Icon={source === \"canvas\" ? SketchIcon : Image}\r\n  label={label || (source === \"canvas\" ? \"Sketch\" : \"Image\")}\r\n/>\r\n\r\n<div\r\n  class=\"image-container\"\r\n  data-testid=\"image\"\r\n  bind:offsetHeight={max_height}\r\n  bind:offsetWidth={max_width}\r\n>\r\n  {#if source === \"upload\"}\r\n    <Upload\r\n      bind:dragging\r\n      filetype=\"image/*\"\r\n      on:load={handle_upload}\r\n      include_file_metadata={false}\r\n      disable_click={!!value}\r\n    >\r\n      {#if (value === null && !static_image) || streaming}\r\n        <slot />\r\n      {:else if tool === \"select\"}\r\n        <Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n        <ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n      {:else if tool === \"editor\"}\r\n        <ModifyUpload\r\n          on:edit={() => (tool = \"select\")}\r\n          on:clear={handle_clear}\r\n          editable\r\n        />\r\n\r\n        <img\r\n          src={value}\r\n          alt=\"\"\r\n          class:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\r\n          class:selectable\r\n          on:click={handle_click}\r\n        />\r\n      {:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n        {#key static_image}\r\n          <img\r\n            bind:this={value_img}\r\n            class=\"absolute-img\"\r\n            src={static_image || value?.image || value}\r\n            data-source={prevValue}\r\n            data-isupload={isUpload}\r\n            alt=\"load-2\"\r\n            on:load={handle_image_load}\r\n            class:webcam={source === \"webcam\" && mirror_webcam}\r\n          />\r\n        {/key}\r\n        {#if img_width > 0}\r\n          <Sketch\r\n            {value}\r\n            bind:this={sketch}\r\n            bind:brush_radius\r\n            bind:brush_color\r\n            on:change={handle_save}\r\n            on:redraw={sketch.redraw()}\r\n            {mode}\r\n            width={img_width || max_width}\r\n            height={img_height || max_height}\r\n            container_height={container_height || max_height}\r\n            {value_img}\r\n            {source}\r\n            {shape}\r\n          />\r\n          <ModifySketch\r\n            on:undo={() => sketch.undo()}\r\n            on:redraw={() => sketch.redraw()}\r\n            on:clear_mask={handle_mask_clear}\r\n            on:remove_image={handle_sketch_clear}\r\n          />\r\n          {#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n            <SketchSettings\r\n              bind:brush_radius\r\n              bind:brush_color\r\n              on:redraw={sketch.redraw()}\r\n              container_height={container_height || max_height}\r\n              img_width={img_width || max_width}\r\n              img_height={img_height || max_height}\r\n              {mode}\r\n            />\r\n          {/if}\r\n        {/if}\r\n      {:else}\r\n        <img\r\n          src={value.image || value}\r\n          alt=\"hello\"\r\n          class:webcam={source === \"webcam\" && mirror_webcam}\r\n          class:selectable\r\n          on:click={handle_click}\r\n        />\r\n      {/if}\r\n    </Upload>\r\n  {:else if source === \"canvas\"}\r\n    <ModifySketch\r\n      on:undo={() => sketch.undo()}\r\n      on:redraw={() => sketch.redraw()}\r\n      on:clear={handle_sketch_clear}\r\n      on:remove_image={handle_sketch_clear}\r\n    />\r\n    {#if tool === \"color-sketch\"}\r\n      <SketchSettings\r\n        bind:brush_radius\r\n        bind:brush_color\r\n        on:redraw={sketch.redraw()}\r\n        container_height={container_height || max_height}\r\n        img_width={img_width || max_width}\r\n        img_height={img_height || max_height}\r\n      />\r\n    {/if}\r\n    <Sketch\r\n      {value}\r\n      bind:brush_radius\r\n      bind:brush_color\r\n      bind:this={sketch}\r\n      on:change={handle_save}\r\n      on:clear={handle_sketch_clear}\r\n      {mode}\r\n      width={img_width || max_width}\r\n      height={img_height || max_height}\r\n      container_height={container_height || max_height}\r\n      {shape}\r\n    />\r\n  {:else if (value === null && !static_image) || streaming}\r\n    {#if source === \"webcam\" && !static_image}\r\n      <Webcam\r\n        on:capture={(e) =>\r\n          tool === \"color-sketch\"\r\n            ? handle_upload(e)\r\n            : handle_save(e, true, \"pizda\")}\r\n        on:stream={handle_save}\r\n        on:error\r\n        {streaming}\r\n        {pending}\r\n        {mirror_webcam}\r\n      />\r\n    {/if}\r\n  {:else if tool === \"select\"}\r\n    <Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n    <ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n  {:else if tool === \"editor\"}\r\n    <ModifyUpload\r\n      on:edit={() => (tool = \"select\")}\r\n      on:clear={handle_clear}\r\n      editable\r\n    />\r\n\r\n    <img\r\n      src={value}\r\n      alt=\"\"\r\n      class:selectable\r\n      class:webcam={source === \"webcam\" && mirror_webcam}\r\n      on:click={handle_click}\r\n    />\r\n  {:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n    {#key static_image}\r\n      <img\r\n        bind:this={value_img}\r\n        class=\"absolute-img\"\r\n        src={static_image || value?.image || value}\r\n        alt=\"load-1\"\r\n        on:load={handle_image_load}\r\n        class:webcam={source === \"webcam\" && mirror_webcam}\r\n      />\r\n    {/key}\r\n    {#if img_width > 0}\r\n      <Sketch\r\n        {value}\r\n        bind:this={sketch}\r\n        bind:brush_radius\r\n        bind:brush_color\r\n        on:change={handle_save}\r\n        {mode}\r\n        width={img_width || max_width}\r\n        height={img_height || max_height}\r\n        container_height={container_height || max_height}\r\n        {value_img}\r\n        {source}\r\n      />\r\n      <ModifySketch\r\n        on:undo={() => sketch.undo()}\r\n        on:redraw={() => sketch.redraw()}\r\n        on:clear={handle_sketch_clear}\r\n        on:remove_image={handle_sketch_clear}\r\n      />\r\n      {#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n        <SketchSettings\r\n          bind:brush_radius\r\n          bind:brush_color\r\n          container_height={container_height || max_height}\r\n          img_width={img_width || max_width}\r\n          img_height={img_height || max_height}\r\n          {mode}\r\n        />\r\n      {/if}\r\n    {/if}\r\n  {:else}\r\n    <img\r\n      src={value.image || value}\r\n      alt=\"\"\r\n      class:webcam={source === \"webcam\" && mirror_webcam}\r\n      class:selectable\r\n      on:click={handle_click}\r\n    />\r\n  {/if}\r\n</div>\r\n\r\n<style>\r\n  .image-container,\r\n  img {\r\n    width: var(--size-full);\r\n    height: var(--size-full);\r\n  }\r\n  img {\r\n    object-fit: contain;\r\n  }\r\n\r\n  .selectable {\r\n    cursor: crosshair;\r\n  }\r\n\r\n  .absolute-img {\r\n    position: absolute;\r\n    opacity: 0;\r\n  }\r\n\r\n  .webcam {\r\n    transform: scaleX(-1);\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport type { SelectData } from \"@gradio/utils\";\r\n\timport { BlockLabel, Empty, IconButton } from \"@gradio/atoms\";\r\n\timport { Download } from \"@gradio/icons\";\r\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\r\n\r\n\timport { Image } from \"@gradio/icons\";\r\n\r\n\texport let value: null | string;\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label: boolean;\r\n\texport let selectable: boolean = false;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string;\r\n\t\tselect: SelectData;\r\n\t}>();\r\n\r\n\t$: value && dispatch(\"change\", value);\r\n\r\n\tconst handle_click = (evt: MouseEvent) => {\r\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\r\n\t\tif (coordinates) {\r\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\r\n{#if value === null}\r\n\t<Empty size=\"large\" unpadded_box={true}><Image /></Empty>\r\n{:else}\r\n\t<div class=\"download\">\r\n\t\t<a\r\n\t\t\thref={value}\r\n\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\r\n\t\t\tdownload={\"image\"}\r\n\t\t>\r\n\t\t\t<IconButton Icon={Download} label=\"Download\" />\r\n\t\t</a>\r\n\t</div>\r\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\r\n\t<img src={value} alt=\"\" class:selectable on:click={handle_click} />\r\n{/if}\r\n\r\n<style>\r\n\timg {\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.selectable {\r\n\t\tcursor: crosshair;\r\n\t}\r\n\r\n\t.download {\r\n\t\tposition: absolute;\r\n\t\ttop: 6px;\r\n\t\tright: 6px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Image, StaticImage } from \"@gradio/image\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { _ } from \"svelte-i18n\";\n\timport { Component as StatusTracker } from \"../StatusTracker/\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport type { Styles } from \"@gradio/utils\";\n\timport UploadText from \"../UploadText.svelte\";\n\n\texport let elem_id: string = \"\";\n\texport let elem_classes: Array<string> = [];\n\texport let visible: boolean = true;\n\texport let value: null | string = null;\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let streaming: boolean;\n\texport let pending: boolean;\n\texport let style: Styles = {};\n\texport let mirror_webcam: boolean;\n\texport let shape: [number, number];\n\texport let brush_radius: number;\n\texport let selectable: boolean = false;\n\n\texport let loading_status: LoadingStatus;\n\n\texport let mode: \"static\" | \"dynamic\";\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: undefined;\n\t}>();\n\n\t$: value, dispatch(\"change\");\n\tlet dragging: boolean;\n\tconst FIXED_HEIGHT = 240;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\n\t\t? \"dashed\"\n\t\t: \"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\tstyle={{\n\t\theight:\n\t\t\tstyle.height ||\n\t\t\t(source === \"webcam\" || mode === \"static\" ? undefined : FIXED_HEIGHT),\n\t\twidth: style.width\n\t}}\n\tallow_overflow={false}\n>\n\t<StatusTracker {...loading_status} />\n\t{#if mode === \"static\"}\n\t\t<StaticImage on:select {value} {label} {show_label} {selectable} />\n\t{:else}\n\t\t<Image\n\t\t\t{brush_radius}\n\t\t\t{shape}\n\t\t\tbind:value\n\t\t\t{source}\n\t\t\t{tool}\n\t\t\t{selectable}\n\t\t\ton:edit\n\t\t\ton:clear\n\t\t\ton:change\n\t\t\ton:stream\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload\n\t\t\ton:select\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tloading_status = loading_status || {};\n\t\t\t\tloading_status.status = \"error\";\n\t\t\t\tloading_status.message = detail;\n\t\t\t}}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\t{mirror_webcam}\n\t\t>\n\t\t\t<UploadText type=\"image\" />\n\t\t</Image>\n\t{/if}\n</Block>\n","export { default as Component } from \"./Image.svelte\";\nexport { default as ExampleComponent } from \"../Dataset/ExampleComponents/Image.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: {\n\t\tpayload: \"string\"\n\t},\n\tdescription: {\n\t\tpayload: \"image data as base64 string\"\n\t},\n\texample_data:\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==\"\n});\n"],"names":["insert","target","svg","anchor","append","path0","path1","circle0","circle1","circle2","circle3","circle4","path","get_coordinates_of_clicked_image","evt","image","imageRect","xScale","yScale","displayed_height","y_offset","x","y","displayed_width","x_offset","ctx","attr","img","img_src_value","$$props","el","dispatch","createEventDispatcher","cropper","destroy","create","Cropper","image_data","$$value","Point","LazyPoint","point","angle","distance","angleRotated","diff","RADIUS_DEFAULT","LazyBrush","radius","enabled","initialPoint","newPointerPoint","both","brush_color_store","writable","div","div_transition","create_bidirectional_transition","fade","canvas_1","listen","is_function","if_block","create_if_block","i","catenary_color","mid_point","p1","p2","getBrightness","hexColor","rgbColor","hexToRgb","r","g","b","hex","result","rgbToHex","rgbString","toHex","num","value","value_img","mode","brush_color","brush_radius","source","width","height","container_height","shape","colorPickerEnabled","transparentMask","posX","posY","mounted","canvas_width","canvas_height","last_value_img","canvas_types","canvas","points","lines","mouse_has_moved","values_changed","is_drawing","is_pressing","lazy","canvas_container","canvas_observer","line_count","draw_cropped_image","_width","_height","shape_ratio","image_ratio","onMount","key","tick","_","trigger_on_change","draw_lines","$$invalidate","ResizeObserver","entries","observer","rest","handle_canvas_resize","loop","init","clear","initX","initY","onDestroy","redraw","clear_canvas","redraw_image","_lines","clear_mask","undo","brushMain","line","_points","draw_points","draw_fake_points","saveLine","save_mask_line","handle_draw_start","e","get_pointer_pos","getPixelColor","brush_color_hex","handle_pointer_move","handle_draw_move","fill_canvas_color","handle_draw_end","old_width","old_height","old_container_height","add_lr_border","container_ratio","dimensions","container_dimensions","set_canvas_size","container","scale","dpr","rect","clientX","clientY","toggleColorPicker","is_disabled","len","midPoint","imageData","a","get_image_data","startX","startY","endX","endY","once","pointer","brush","draw_interface","brushX","brushY","brushOutlineEnabled","brightness","brush_dot","name","Erase","Undo","Copy","Clear","span","dirty","event","input","Color","create_if_block_1","Brush","create_if_block_2","if_block1","show_size","show_col","img_width","img_height","$brush_color","click_handler","to_number","click_handler_1","create_if_block_14","create_if_block_10","create_if_block_8","sketch_1_changes","src_url_equal","create_if_block_15","sketchsettings_changes","create_if_block_5","create_if_block_6","SketchIcon","Image","blocklabel_changes","label","show_label","tool","streaming","pending","mirror_webcam","selectable","sketch","prevValue","isUpload","handle_upload","detail","static_image","handle_clear","handle_save","initial","change","dragging","handle_image_load","element","handle_sketch_clear","handle_mask_clear","max_height","max_width","handle_click","coordinates","clear_handler","edit_handler","undo_handler","redraw_handler","undo_handler_1","redraw_handler_1","clear_handler_1","edit_handler_1","undo_handler_2","redraw_handler_2","Download","FIXED_HEIGHT","elem_id","elem_classes","visible","style","loading_status","modes","document","config"],"mappings":"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","x_google_ignoreList":[6,7,8]}