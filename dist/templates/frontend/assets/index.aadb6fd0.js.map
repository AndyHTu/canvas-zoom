{"version":3,"file":"index.aadb6fd0.js","sources":["../../../../ui/packages/icons/src/Brush.svelte","../../../../ui/packages/icons/src/Color.svelte","../../../../ui/packages/icons/src/Sketch.svelte","../../../../ui/packages/image/src/Cropper.svelte","../../../../ui/node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/Point.js","../../../../ui/node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyPoint.js","../../../../ui/node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyBrush.js","../../../../ui/packages/image/src/Brushcolor.js","../../../../ui/packages/image/src/Sketch.svelte","../../../../ui/packages/image/src/ModifySketch.svelte","../../../../ui/packages/image/src/SketchSettings.svelte","../../../../ui/packages/image/src/Image.svelte","../../../../ui/packages/image/src/StaticImage.svelte","../../../../ui/packages/app/src/components/Image/Image.svelte","../../../../ui/packages/app/src/components/Image/index.ts"],"sourcesContent":["<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\r\n\t<path\r\n\t\td=\"M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z\"\r\n\t\tfill=\"currentColor\"\r\n\t/>\r\n\t<path\r\n\t\td=\"M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z\"\r\n\t\tfill=\"currentColor\"\r\n\t/>\r\n</svg>\r\n","<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\r\n\t<circle cx=\"10\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"16\" cy=\"9\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"22\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"23\" cy=\"18\" r=\"2\" fill=\"currentColor\" />\r\n\t<circle cx=\"19\" cy=\"23\" r=\"2\" fill=\"currentColor\" />\r\n\t<path\r\n\t\tfill=\"currentColor\"\r\n\t\td=\"M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z\"\r\n\t/>\r\n</svg>\r\n","<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\twidth=\"100%\"\r\n\theight=\"100%\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tfill=\"none\"\r\n\tstroke=\"currentColor\"\r\n\tstroke-width=\"1.5\"\r\n\tstroke-linecap=\"round\"\r\n\tstroke-linejoin=\"round\"\r\n\tclass=\"feather feather-edit-2\"\r\n>\r\n\t<path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\" />\r\n</svg>\r\n","<svelte:options accessors={true} />\r\n\r\n<script lang=\"ts\">\r\n\timport Cropper from \"cropperjs\";\r\n\timport { onMount, createEventDispatcher } from \"svelte\";\r\n\r\n\texport let image: string;\r\n\tlet el: HTMLImageElement;\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\tlet cropper: Cropper;\r\n\r\n\texport function destroy() {\r\n\t\tcropper.destroy();\r\n\t}\r\n\r\n\texport function create() {\r\n\t\tif (cropper) {\r\n\t\t\tdestroy();\r\n\t\t}\r\n\t\tcropper = new Cropper(el, {\r\n\t\t\tautoCropArea: 1,\r\n\t\t\tcropend() {\r\n\t\t\t\tconst image_data = cropper.getCroppedCanvas().toDataURL();\r\n\t\t\t\tdispatch(\"crop\", image_data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdispatch(\"crop\", image);\r\n\t}\r\n</script>\r\n\r\n<img src={image} bind:this={el} alt=\"\" />\r\n","class Point {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport default Point\n","import Point from './Point'\n\nclass LazyPoint extends Point {\n  /**\n   * Update the x and y values\n   *\n   * @param {Point} point\n   */\n  update (point) {\n    this.x = point.x\n    this.y = point.y\n  }\n\n  /**\n   * Move the point to another position using an angle and distance\n   *\n   * @param {number} angle The angle in radians\n   * @param {number} distance How much the point should be moved\n   */\n  moveByAngle (angle, distance) {\n    // Rotate the angle based on the browser coordinate system ([0,0] in the top left)\n    const angleRotated = angle + (Math.PI / 2)\n\n    this.x = this.x + (Math.sin(angleRotated) * distance),\n    this.y = this.y - (Math.cos(angleRotated) * distance)\n  }\n\n  /**\n   * Check if this point is the same as another point\n   *\n   * @param {Point} point\n   * @returns {boolean}\n   */\n  equalsTo (point) {\n    return this.x === point.x && this.y === point.y\n  }\n\n  /**\n   * Get the difference for x and y axis to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDifferenceTo (point) {\n    return new Point(this.x - point.x, this.y - point.y)\n  }\n\n  /**\n   * Calculate distance to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDistanceTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.sqrt(Math.pow(diff.x, 2) + Math.pow(diff.y, 2))\n  }\n\n  /**\n   * Calculate the angle to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getAngleTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.atan2(diff.y, diff.x)\n  }\n\n  /**\n   * Return a simple object with x and y properties\n   *\n   * @returns {object}\n   */\n  toObject () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  }\n}\n\nexport default LazyPoint\n","import LazyPoint from './LazyPoint'\nconst RADIUS_DEFAULT = 30\n\nclass LazyBrush {\n  /**\n   * constructor\n   *\n   * @param {object} settings\n   * @param {number} settings.radius The radius for the lazy area\n   * @param {boolean} settings.enabled\n   */\n  constructor ({ radius = RADIUS_DEFAULT, enabled = true, initialPoint = { x: 0, y: 0 }} = {}) {\n    this.radius = radius\n    this._isEnabled = enabled\n\n    this.pointer = new LazyPoint(initialPoint.x, initialPoint.y)\n    this.brush = new LazyPoint(initialPoint.x, initialPoint.y)\n\n    this.angle = 0\n    this.distance = 0\n    this._hasMoved = false\n  }\n\n  /**\n   * Enable lazy brush calculations.\n   *\n   */\n  enable () {\n    this._isEnabled = true\n  }\n\n  /**\n   * Disable lazy brush calculations.\n   *\n   */\n  disable () {\n    this._isEnabled = false\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isEnabled () {\n    return this._isEnabled\n  }\n\n  /**\n   * Update the radius\n   *\n   * @param {number} radius\n   */\n  setRadius (radius) {\n    this.radius = radius\n  }\n\n  /**\n   * Return the current radius\n   *\n   * @returns {number}\n   */\n  getRadius () {\n    return this.radius\n  }\n\n  /**\n   * Return the brush coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getBrushCoordinates () {\n    return this.brush.toObject()\n  }\n\n  /**\n   * Return the pointer coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getPointerCoordinates () {\n    return this.pointer.toObject()\n  }\n\n  /**\n   * Return the brush as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getBrush () {\n    return this.brush\n  }\n\n  /**\n   * Return the pointer as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getPointer () {\n    return this.pointer\n  }\n\n  /**\n   * Return the angle between pointer and brush\n   *\n   * @returns {number} Angle in radians\n   */\n  getAngle () {\n    return this.angle\n  }\n\n  /**\n   * Return the distance between pointer and brush\n   *\n   * @returns {number} Distance in pixels\n   */\n  getDistance () {\n    return this.distance\n  }\n\n  /**\n   * Return if the previous update has moved the brush.\n   *\n   * @returns {boolean} Whether the brush moved previously.\n   */\n  brushHasMoved () {\n    return this._hasMoved\n  }\n\n  /**\n   * Updates the pointer point and calculates the new brush point.\n   *\n   * @param {Point} newPointerPoint\n   * @param {Object} options\n   * @param {Boolean} options.both Force update pointer and brush\n   * @returns {Boolean} Whether any of the two points changed\n   */\n  update (newPointerPoint, { both = false } = {}) {\n    this._hasMoved = false\n    if (this.pointer.equalsTo(newPointerPoint) && !both) {\n      return false\n    }\n\n    this.pointer.update(newPointerPoint)\n\n    if (both) {\n      this._hasMoved = true\n      this.brush.update(newPointerPoint)\n      return true\n    }\n\n    if (this._isEnabled) {\n      this.distance = this.pointer.getDistanceTo(this.brush)\n      this.angle = this.pointer.getAngleTo(this.brush)\n\n      if (this.distance > this.radius) {\n        this.brush.moveByAngle(this.angle, this.distance - this.radius)\n        this._hasMoved = true\n      }\n    } else {\n      this.distance = 0\n      this.angle = 0\n      this.brush.update(newPointerPoint)\n      this._hasMoved = true\n    }\n\n    return true\n  }\n}\n\nexport default LazyBrush\n\n","import { writable } from \"svelte/store\";\r\n\r\nexport const brush_color_store = writable(\"#000000\");\r\n","<script>\r\n\t// @ts-nocheck\r\n\r\n\timport { onMount, onDestroy, createEventDispatcher, tick } from \"svelte\";\r\n\timport { fade } from \"svelte/transition\";\r\n\timport { LazyBrush } from \"lazy-brush/src\";\r\n\timport { brush_color_store } from \"./Brushcolor\";\r\n\timport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\texport let value;\r\n\texport let value_img;\r\n\texport let mode = \"sketch\";\r\n\texport let brush_color = \"#0b0f19\";\r\n\texport let brush_radius;\r\n\texport let source;\r\n\r\n\texport let width = 400;\r\n\texport let height = 200;\r\n\texport let container_height = 200;\r\n\texport let shape;\r\n\tlet colorPickerEnabled = localStorage.setItem(\"colorPickerEnable\", false);\r\n\tlet transparentMask = localStorage.setItem(\"transparentMask\", false);\r\n\tlet posX = 0;\r\n\tlet posY = 0;\r\n\r\n\t$: {\r\n\t\tif (shape && (width || height)) {\r\n\t\t\twidth = shape[0];\r\n\t\t\theight = shape[1];\r\n\t\t}\r\n\t}\r\n\r\n\tlet mounted;\r\n\tlet isMaskMode;\r\n\r\n\tlet catenary_color = \"#aaa\";\r\n\r\n\tlet canvas_width = width;\r\n\tlet canvas_height = height;\r\n\r\n\t$: mounted && !value && clear();\r\n\r\n\tlet last_value_img;\r\n\r\n\t$: {\r\n\t\tif (mounted && value_img !== last_value_img) {\r\n\t\t\tlast_value_img = value_img;\r\n\r\n\t\t\tclear();\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\tdraw_lines({ lines: lines.slice() });\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t}, 50);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mid_point(p1, p2) {\r\n\t\treturn {\r\n\t\t\tx: p1.x + (p2.x - p1.x) / 2,\r\n\t\t\ty: p1.y + (p2.y - p1.y) / 2\r\n\t\t};\r\n\t}\r\n\r\n\tconst canvas_types = [\r\n\t\t{\r\n\t\t\tname: \"interface\",\r\n\t\t\tzIndex: 15\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"drawing\",\r\n\t\t\tzIndex: 11\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"temp\",\r\n\t\t\tzIndex: 12\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"mask\",\r\n\t\t\tzIndex: -1\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"temp_fake\",\r\n\t\t\tzIndex: -2\r\n\t\t}\r\n\t];\r\n\r\n\tlet canvas = {};\r\n\tlet ctx = {};\r\n\tlet points = [];\r\n\tlet lines = [];\r\n\tlet mouse_has_moved = true;\r\n\tlet values_changed = true;\r\n\tlet is_drawing = false;\r\n\tlet is_pressing = false;\r\n\tlet lazy = null;\r\n\tlet canvas_container = null;\r\n\tlet canvas_observer = null;\r\n\tlet line_count = 0;\r\n\r\n\tfunction draw_cropped_image() {\r\n\t\tif (!shape) {\r\n\t\t\tctx.temp.drawImage(value_img, 0, 0, width, height);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet _width = value_img.naturalWidth;\r\n\t\tlet _height = value_img.naturalHeight;\r\n\r\n\t\tconst shape_ratio = shape[0] / shape[1];\r\n\t\tconst image_ratio = _width / _height;\r\n\r\n\t\tlet x = 0;\r\n\t\tlet y = 0;\r\n\r\n\t\tif (shape_ratio < image_ratio) {\r\n\t\t\t_width = shape[1] * image_ratio;\r\n\t\t\t_height = shape[1];\r\n\t\t\tx = (shape[0] - _width) / 2;\r\n\t\t} else if (shape_ratio > image_ratio) {\r\n\t\t\t_width = shape[0];\r\n\t\t\t_height = shape[0] / image_ratio;\r\n\t\t\ty = (shape[1] - _height) / 2;\r\n\t\t} else {\r\n\t\t\tx = 0;\r\n\t\t\ty = 0;\r\n\t\t\t_width = shape[0];\r\n\t\t\t_height = shape[1];\r\n\t\t}\r\n\r\n\t\tctx.temp.drawImage(value_img, x, y, _width, _height);\r\n\t}\r\n\r\n\tonMount(async () => {\r\n\t\tObject.keys(canvas).forEach((key) => {\r\n\t\t\tctx[key] = canvas[key].getContext(\"2d\");\r\n\t\t});\r\n\r\n\t\tawait tick();\r\n\r\n\t\tif (value_img) {\r\n\t\t\tvalue_img.addEventListener(\"load\", (_) => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t});\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (source === \"webcam\") {\r\n\t\t\t\t\tctx.temp.save();\r\n\t\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\t\tctx.temp.restore();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraw_cropped_image();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\t\t\tdraw_lines({ lines: lines.slice() });\r\n\t\t\t\ttrigger_on_change();\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\tlazy = new LazyBrush({\r\n\t\t\tradius: brush_radius * 0.05,\r\n\t\t\tenabled: true,\r\n\t\t\tinitialPoint: {\r\n\t\t\t\tx: width / 2,\r\n\t\t\t\ty: height / 2\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcanvas_observer = new ResizeObserver((entries, observer, ...rest) => {\r\n\t\t\thandle_canvas_resize(entries, observer);\r\n\t\t});\r\n\t\tcanvas_observer.observe(canvas_container);\r\n\r\n\t\tloop();\r\n\t\tmounted = true;\r\n\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tinit();\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tclear();\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\tfunction init() {\r\n\t\tconst initX = width / 2;\r\n\t\tconst initY = height / 2;\r\n\t\tlazy.update({ x: initX, y: initY }, { both: true });\r\n\t\tlazy.update({ x: initX, y: initY }, { both: false });\r\n\t\tmouse_has_moved = true;\r\n\t\tvalues_changed = true;\r\n\t}\r\n\r\n\tonDestroy(() => {\r\n\t\tmounted = false;\r\n\t\tcanvas_observer.unobserve(canvas_container);\r\n\t});\r\n\r\n\texport function undo() {\r\n\t\tconst _lines = lines.slice(0, -1);\r\n\r\n\t\tclear_canvas();\r\n\r\n\t\tif (value_img) {\r\n\t\t\tif (source === \"webcam\") {\r\n\t\t\t\tctx.temp.save();\r\n\t\t\t\tctx.temp.translate(width, 0);\r\n\t\t\t\tctx.temp.scale(-1, 1);\r\n\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\r\n\t\t\t\tctx.temp.restore();\r\n\t\t\t} else {\r\n\t\t\t\tdraw_cropped_image();\r\n\t\t\t}\r\n\r\n\t\t\tif (!lines || !lines.length) {\r\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdraw_lines({ lines: _lines });\r\n\t\tline_count = _lines.length;\r\n\r\n\t\tif (lines.length) {\r\n\t\t\tlines = _lines;\r\n\t\t}\r\n\r\n\t\tif (lines.length == 0) {\r\n\t\t\tdispatch(\"clear\");\r\n\t\t}\r\n\t\ttrigger_on_change();\r\n\t}\r\n\r\n\texport function redraw() {\r\n\t\tclear_canvas();\r\n\t\tif (value_img) {\r\n\t\t\tdraw_cropped_image();\r\n\t\t}\r\n\r\n\t\tif (lines.length == 0) {\r\n\t\t\tdispatch(\"clear\");\r\n\t\t}\r\n\r\n\t\tline_count = lines.length;\r\n\t\tdraw_lines({ lines: lines }, true);\r\n\r\n\t\ttrigger_on_change();\r\n\t}\r\n\r\n\tlet get_save_data = () => {\r\n\t\treturn JSON.stringify({\r\n\t\t\tlines: lines,\r\n\t\t\twidth: canvas_width,\r\n\t\t\theight: canvas_height\r\n\t\t});\r\n\t};\r\n\r\n\tlet draw_lines = ({ lines }) => {\r\n\t\tconst brushMain = brush_color;\r\n\t\tlines.forEach((line) => {\r\n\t\t\tlet { points: _points, brush_color, brush_radius } = line;\r\n\r\n\t\t\tif (mode === \"mask\") {\r\n\t\t\t\tdraw_points({\r\n\t\t\t\t\tpoints: _points,\r\n\t\t\t\t\tbrush_color: brushMain,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdraw_points({\r\n\t\t\t\t\tpoints: _points,\r\n\t\t\t\t\tbrush_color,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (mode === \"mask\") {\r\n\t\t\t\tdraw_fake_points({\r\n\t\t\t\t\tpoints: _points,\r\n\t\t\t\t\tbrush_color: brushMain,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tpoints = _points;\r\n\r\n\t\t\treturn;\r\n\t\t});\r\n\t\tsaveLine({ brush_color, brush_radius });\r\n\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tsave_mask_line();\r\n\t\t}\r\n\t};\r\n\r\n\tlet handle_draw_start = (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst { x, y } = get_pointer_pos(e);\r\n\t\tif (e.button !== 0) return;\r\n\r\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n\r\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\r\n\t\t\tbrush_color = getPixelColor(x, y);\r\n\t\t\tconst brush_color_hex = rgbToHex(brush_color);\r\n\t\t\tbrush_color_store.set(brush_color_hex);\r\n\t\t\tlocalStorage.setItem(\"colorPickerEnable\", \"false\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tis_pressing = true;\r\n\r\n\t\tif (e.touches && e.touches.length > 0) {\r\n\t\t\tlazy.update({ x, y }, { both: true });\r\n\t\t}\r\n\r\n\t\thandle_pointer_move(x, y);\r\n\t\tline_count += 1;\r\n\t};\r\n\r\n\tlet handle_draw_move = (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst { x, y } = get_pointer_pos(e);\r\n\t\tposX = x;\r\n\t\tposY = y;\r\n\t\thandle_pointer_move(x, y);\r\n\t};\r\n\r\n\tlet handle_draw_end = (e) => {\r\n\t\te.preventDefault();\r\n\t\thandle_draw_move(e);\r\n\t\tis_drawing = false;\r\n\t\tis_pressing = false;\r\n\t\tsaveLine();\r\n\r\n\t\ttransparentMask = localStorage.getItem(\"transparentMask\") === \"true\";\r\n\t\tif (transparentMask) {\r\n\t\t\tredraw();\r\n\t\t}\r\n\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tsave_mask_line();\r\n\t\t}\r\n\t};\r\n\r\n\tlet old_width = 0;\r\n\tlet old_height = 0;\r\n\tlet old_container_height = 0;\r\n\tlet add_lr_border = false;\r\n\r\n\tlet handle_canvas_resize = async () => {\r\n\t\tif (shape && canvas_container) {\r\n\t\t\tconst x = canvas_container?.getBoundingClientRect();\r\n\t\t\tconst shape_ratio = shape[0] / shape[1];\r\n\t\t\tconst container_ratio = x.width / x.height;\r\n\t\t\tadd_lr_border = shape_ratio < container_ratio;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\twidth === old_width &&\r\n\t\t\theight === old_height &&\r\n\t\t\told_container_height === container_height\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst dimensions = { width: width, height: height };\r\n\r\n\t\tconst container_dimensions = {\r\n\t\t\theight: container_height,\r\n\t\t\twidth: container_height * (dimensions.width / dimensions.height)\r\n\t\t};\r\n\r\n\t\tawait Promise.all([\r\n\t\t\tset_canvas_size(canvas.interface, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.drawing, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.temp, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.temp_fake, dimensions, container_dimensions),\r\n\t\t\tset_canvas_size(canvas.mask, dimensions, container_dimensions, false)\r\n\t\t]);\r\n\r\n\t\tif (!brush_radius) {\r\n\t\t\tbrush_radius = 20 * (dimensions.width / container_dimensions.width);\r\n\t\t}\r\n\r\n\t\tloop({ once: true });\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\told_height = height;\r\n\t\t\told_width = width;\r\n\t\t\told_container_height = container_height;\r\n\t\t}, 10);\r\n\t\tawait tick();\r\n\r\n\t\tclear();\r\n\t};\r\n\r\n\t$: {\r\n\t\tif (lazy) {\r\n\t\t\tinit();\r\n\t\t\tlazy.setRadius(brush_radius * 0.05);\r\n\t\t}\r\n\t}\r\n\r\n\t$: {\r\n\t\tif (width || height) {\r\n\t\t\thandle_canvas_resize();\r\n\t\t}\r\n\t}\r\n\r\n\tlet set_canvas_size = async (canvas, dimensions, container, scale = true) => {\r\n\t\tif (!mounted) return;\r\n\t\tawait tick();\r\n\r\n\t\tconst dpr = window.devicePixelRatio || 1;\r\n\t\tcanvas.width = dimensions.width * (scale ? dpr : 1);\r\n\t\tcanvas.height = dimensions.height * (scale ? dpr : 1);\r\n\r\n\t\tconst ctx = canvas.getContext(\"2d\");\r\n\t\tscale && ctx.scale(dpr, dpr);\r\n\r\n\t\tcanvas.style.width = `${container.width}px`;\r\n\t\tcanvas.style.height = `${container.height}px`;\r\n\t};\r\n\r\n\tlet get_pointer_pos = (e) => {\r\n\t\tconst rect = canvas.interface.getBoundingClientRect();\r\n\r\n\t\tlet clientX = e.clientX;\r\n\t\tlet clientY = e.clientY;\r\n\t\tif (e.changedTouches && e.changedTouches.length > 0) {\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: ((clientX - rect.left) / rect.width) * width,\r\n\t\t\ty: ((clientY - rect.top) / rect.height) * height\r\n\t\t};\r\n\t};\r\n\r\n\tfunction toggleColorPicker() {\r\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\r\n\t\t\tfor (const key in canvas) {\r\n\t\t\t\tcanvas[key].style.cursor = \"crosshair\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (const key in canvas) {\r\n\t\t\t\tcanvas[key].style.cursor = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlet handle_pointer_move = (x, y) => {\r\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\r\n\t\ttoggleColorPicker();\r\n\r\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlazy.update({ x: x, y: y });\r\n\r\n\t\tconst is_disabled = !lazy.isEnabled();\r\n\t\tif ((is_pressing && !is_drawing) || (is_disabled && is_pressing)) {\r\n\t\t\tis_drawing = true;\r\n\t\t\tpoints.push(lazy.brush.toObject());\r\n\t\t}\r\n\t\tif (is_drawing) {\r\n\t\t\tpoints.push(lazy.brush.toObject());\r\n\t\t\tdraw_points({\r\n\t\t\t\tpoints: points,\r\n\t\t\t\tbrush_color,\r\n\t\t\t\tbrush_radius\r\n\t\t\t});\r\n\r\n\t\t\tif (mode === \"mask\") {\r\n\t\t\t\tdraw_fake_points({\r\n\t\t\t\t\tpoints: points,\r\n\t\t\t\t\tbrush_color,\r\n\t\t\t\t\tbrush_radius\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tmouse_has_moved = true;\r\n\t};\r\n\r\n\tlet draw_points = ({ points, brush_color, brush_radius }) => {\r\n\t\tif (!points || points.length < 2) return;\r\n\t\tctx.temp.lineJoin = \"round\";\r\n\t\tctx.temp.lineCap = \"round\";\r\n\r\n\t\tctx.temp.strokeStyle = brush_color;\r\n\t\tctx.temp.lineWidth = brush_radius;\r\n\t\tif (!points || points.length < 2) return;\r\n\t\tlet p1 = points[0];\r\n\t\tlet p2 = points[1];\r\n\t\tctx.temp.moveTo(p2.x, p2.y);\r\n\t\tctx.temp.beginPath();\r\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\tvar midPoint = mid_point(p1, p2);\r\n\t\t\tctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n\t\t\tp1 = points[i];\r\n\t\t\tp2 = points[i + 1];\r\n\t\t}\r\n\r\n\t\tctx.temp.lineTo(p1.x, p1.y);\r\n\t\tctx.temp.stroke();\r\n\t};\r\n\r\n\tlet draw_fake_points = ({ points, brush_color, brush_radius }) => {\r\n\t\tif (!points || points.length < 2) return;\r\n\r\n\t\tctx.temp_fake.lineJoin = \"round\";\r\n\t\tctx.temp_fake.lineCap = \"round\";\r\n\t\tctx.temp_fake.strokeStyle = \"#fff\";\r\n\t\tctx.temp_fake.lineWidth = brush_radius;\r\n\t\tlet p1 = points[0];\r\n\t\tlet p2 = points[1];\r\n\t\tctx.temp_fake.moveTo(p2.x, p2.y);\r\n\t\tctx.temp_fake.beginPath();\r\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\tvar midPoint = mid_point(p1, p2);\r\n\t\t\tctx.temp_fake.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n\t\t\tp1 = points[i];\r\n\t\t\tp2 = points[i + 1];\r\n\t\t}\r\n\r\n\t\tctx.temp_fake.lineTo(p1.x, p1.y);\r\n\t\tctx.temp_fake.stroke();\r\n\t};\r\n\r\n\t// help funcs\r\n\r\n\tfunction getBrightness(hexColor) {\r\n\t\tconst rgbColor = hexToRgb(hexColor);\r\n\t\tif (rgbColor) {\r\n\t\t\tconst { r, g, b } = rgbColor;\r\n\t\t\treturn (r * 299 + g * 587 + b * 114) / 1000;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction getPixelColor(x, y) {\r\n\t\tconst imageData = ctx.drawing.getImageData(x, y, 1, 1);\r\n\t\tconst [r, g, b, a] = imageData.data;\r\n\t\treturn `rgb(${r}, ${g}, ${b})`;\r\n\t}\r\n\r\n\tfunction hexToRgb(hex) {\r\n\t\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\treturn result\r\n\t\t\t? {\r\n\t\t\t\t\tr: parseInt(result[1], 16),\r\n\t\t\t\t\tg: parseInt(result[2], 16),\r\n\t\t\t\t\tb: parseInt(result[3], 16)\r\n\t\t\t  }\r\n\t\t\t: null;\r\n\t}\r\n\r\n\tfunction rgbToHex(rgbString) {\r\n\t\t// Extracting r, g, b values from a string\r\n\t\tconst [r, g, b] = rgbString\r\n\t\t\t.match(/\\d+/g) // Find all the numbers in the string\r\n\t\t\t.map(Number); // Convert each group of digits to a numeric value\r\n\r\n\t\t// Function to convert a number to a two-digit hexadecimal value\r\n\t\tfunction toHex(num) {\r\n\t\t\tconst hex = num.toString(16);\r\n\t\t\treturn hex.length === 1 ? `0${hex}` : hex;\r\n\t\t}\r\n\r\n\t\t// Convert each r, g, b value to hexadecimal format and combine them\r\n\t\treturn `#${toHex(r)}${toHex(g)}${toHex(b)}`;\r\n\t}\r\n\r\n\t// end\r\n\r\n\tlet save_mask_line = () => {\r\n\t\tif (points.length < 1) return;\r\n\t\tpoints.length = 0;\r\n\t\tctx.mask.drawImage(canvas.temp_fake, 0, 0, width, height);\r\n\r\n\t\ttrigger_on_change();\r\n\t};\r\n\r\n\tlet saveLine = () => {\r\n\t\tif (points.length < 1) return;\r\n\r\n\t\tlines.push({\r\n\t\t\tpoints: points.slice(),\r\n\t\t\tbrush_color: brush_color,\r\n\t\t\tbrush_radius\r\n\t\t});\r\n\r\n\t\tif (mode !== \"mask\") {\r\n\t\t\tpoints.length = 0;\r\n\t\t}\r\n\r\n\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\r\n\r\n\t\ttrigger_on_change();\r\n\t};\r\n\r\n\tlet trigger_on_change = () => {\r\n\t\tconst x = get_image_data();\r\n\t\tdispatch(\"change\", x);\r\n\t};\r\n\r\n\texport function clear() {\r\n\t\tlines = [];\r\n\t\tclear_canvas();\r\n\t\tline_count = 0;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction clear_canvas() {\r\n\t\tvalues_changed = true;\r\n\t\tctx.temp.clearRect(0, 0, width, height);\r\n\r\n\t\tctx.temp.fillStyle = mode === \"mask\" ? \"transparent\" : \"#FFFFFF\";\r\n\t\tctx.temp.fillRect(0, 0, width, height);\r\n\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tctx.temp_fake.clearRect(\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tcanvas.temp_fake.width,\r\n\t\t\t\tcanvas.temp_fake.height\r\n\t\t\t);\r\n\t\t\tctx.mask.clearRect(0, 0, width, height);\r\n\t\t\tctx.mask.fillStyle = \"#000\";\r\n\t\t\tctx.mask.fillRect(0, 0, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tlet loop = ({ once = false } = {}) => {\r\n\t\tif (mouse_has_moved || values_changed) {\r\n\t\t\tconst pointer = lazy.getPointerCoordinates();\r\n\t\t\tconst brush = lazy.getBrushCoordinates();\r\n\t\t\tdraw_interface(ctx.interface, pointer, brush);\r\n\t\t\tmouse_has_moved = false;\r\n\t\t\tvalues_changed = false;\r\n\t\t}\r\n\t\tif (!once) {\r\n\t\t\twindow.requestAnimationFrame(() => {\r\n\t\t\t\tloop();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$: brush_dot = brush_radius * 0.075;\r\n\r\n\tlet draw_interface = (ctx, pointer, brush) => {\r\n\t\tctx.clearRect(0, 0, width, height);\r\n\r\n\t\tlet brushX = brush.x;\r\n\t\tlet brushY = brush.y;\r\n\r\n\t\tif (posX && posY) {\r\n\t\t\tbrushX = posX;\r\n\t\t\tbrushY = posY;\r\n\t\t}\r\n\t\t// brush preview\r\n\t\tctx.beginPath();\r\n\t\tctx.fillStyle = brush_color;\r\n\r\n\t\tconst brushOutlineEnabled = localStorage.getItem(\"brushOutline\") === \"true\";\r\n\t\tif (brushOutlineEnabled) {\r\n\t\t\tconst brightness = getBrightness(brush_color);\r\n\t\t\tctx.strokeStyle = brightness > 128 ? \"black\" : \"white\"; // Change the strokeStyle based on brightness\r\n\t\t\tif (brush_radius > 180) {\r\n\t\t\t\tctx.lineWidth = 4;\r\n\t\t\t} else if (brush_radius > 80) {\r\n\t\t\t\tctx.lineWidth = 3; // Change the value to control the thickness of the border\r\n\t\t\t} else if (brush_radius > 20) {\r\n\t\t\t\tctx.lineWidth = 2; // Change the value to control the thickness of the border\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.arc(brushX, brushY, brush_radius / 2, 0, Math.PI * 2, true);\r\n\t\tctx.fill(); // Filling the main point\r\n\r\n\t\tif (brushOutlineEnabled) {\r\n\t\t\tctx.stroke(); // Main Point Boundary\r\n\t\t}\r\n\r\n\t\t// tiny brush point dot\r\n\t\tctx.beginPath();\r\n\t\tctx.fillStyle = catenary_color;\r\n\t\tctx.arc(brushX, brushY, brush_dot, 0, Math.PI * 2, true);\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\texport function get_image_data() {\r\n\t\treturn mode === \"mask\"\r\n\t\t\t? canvas.mask.toDataURL(\"image/jpg\")\r\n\t\t\t: canvas.drawing.toDataURL(\"image/jpg\");\r\n\t}\r\n</script>\r\n\r\n<div\r\n\tclass=\"wrap\"\r\n\tbind:this={canvas_container}\r\n\tbind:offsetWidth={canvas_width}\r\n\tbind:offsetHeight={canvas_height}\r\n>\r\n\t{#if line_count === 0}\r\n\t\t<div transition:fade={{ duration: 50 }} class=\"start-prompt\">\r\n\t\t\tStart drawing\r\n\t\t</div>\r\n\t{/if}\r\n\t{#each canvas_types as { name, zIndex }}\r\n\t\t<canvas\r\n\t\t\tkey={name}\r\n\t\t\tstyle=\" z-index:{zIndex};\"\r\n\t\t\tclass:lr={add_lr_border}\r\n\t\t\tclass:tb={!add_lr_border}\r\n\t\t\tbind:this={canvas[name]}\r\n\t\t\ton:mousedown={name === \"interface\" ? handle_draw_start : undefined}\r\n\t\t\ton:mousemove={name === \"interface\" ? handle_draw_move : undefined}\r\n\t\t\ton:mouseup={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:mouseout={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:mouseout={name === \"interface\"\r\n\t\t\t\t? () => {\r\n\t\t\t\t\t\tposX = posY = 0;\r\n\t\t\t\t  }\r\n\t\t\t\t: undefined}\r\n\t\t\ton:blur={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:touchstart={name === \"interface\" ? handle_draw_start : undefined}\r\n\t\t\ton:touchmove={name === \"interface\" ? handle_draw_move : undefined}\r\n\t\t\ton:touchend={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:touchcancel={name === \"interface\" ? handle_draw_end : undefined}\r\n\t\t\ton:click|stopPropagation\r\n\t\t/>\r\n\t{/each}\r\n</div>\r\n\r\n<style>\r\n\tcanvas {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\ttop: 0px;\r\n\t\tright: 0px;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0px;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t.lr {\r\n\t\tborder-right: 10px solid var(--border-color-primary);\r\n\t\tborder-left: 1px solid var(--border-color-primary);\r\n\t}\r\n\r\n\t.tb {\r\n\t\tborder-top: 1px solid var(--border-color-primary);\r\n\t\tborder-bottom: 1px solid var(--border-color-primary);\r\n\t}\r\n\r\n\tcanvas:not(.color-picker-enabled):hover {\r\n\t\tcursor: none;\r\n\t}\r\n\r\n\tcanvas.color-picker-enabled:hover {\r\n\t\tcursor: crosshair;\r\n\t}\r\n\r\n\t.wrap {\r\n\t\tposition: relative;\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\ttouch-action: none;\r\n\t}\r\n\r\n\t.start-prompt {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: 0px;\r\n\t\tright: 0px;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: var(--layer-4);\r\n\t\ttouch-action: none;\r\n\t\tpointer-events: none;\r\n\t\tcolor: var(--body-text-color-subdued);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { IconButton } from \"@gradio/atoms\";\r\n\timport { Undo, Clear, Copy } from \"@gradio/icons\";\r\n\tconst dispatch = createEventDispatcher();\r\n</script>\r\n\r\n<div>\r\n\t<IconButton Icon={Undo} label=\"Undo\" on:click={() => dispatch(\"undo\")} />\r\n\t<IconButton Icon={Copy} label=\"Redraw\" on:click={() => dispatch(\"redraw\")} />\r\n\t<IconButton\r\n\t\tIcon={Clear}\r\n\t\tlabel=\"Clear\"\r\n\t\ton:click={(event) => {\r\n\t\t\tdispatch(\"clear\");\r\n\t\t\tevent.stopPropagation();\r\n\t\t}}\r\n\t/>\r\n</div>\r\n\r\n<style>\r\n\tdiv {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: var(--size-2);\r\n\t\tright: var(--size-2);\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: var(--spacing-sm);\r\n\t\tz-index: var(--layer-5);\r\n\t}\r\n\r\n\tbutton[aria-label=\"Redraw\"] {\r\n\t\tdisplay: none;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { IconButton } from \"@gradio/atoms\";\r\n\timport { Brush, Color } from \"@gradio/icons\";\r\n\timport { brush_color_store } from \"./Brushcolor\";\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\tlet show_size = false;\r\n\tlet show_col = false;\r\n\r\n\texport let brush_radius = 20;\r\n\t// export let brush_color = \"\";\r\n\texport let container_height: number;\r\n\texport let img_width: number;\r\n\texport let img_height: number;\r\n\texport let mode: \"mask\" | \"other\" = \"other\";\r\n\texport let brush_color = \"#000\";\r\n\r\n\tbrush_color_store.subscribe(($brush_color) => {\r\n\t\tbrush_color = $brush_color;\r\n\t});\r\n\r\n\t$: width = container_height * (img_width / img_height);\r\n</script>\r\n\r\n<div class=\"wrap\">\r\n\t<span class=\"brush\">\r\n\t\t<IconButton\r\n\t\t\tIcon={Brush}\r\n\t\t\tlabel=\"Use brush\"\r\n\t\t\ton:click={() => (show_size = !show_size)}\r\n\t\t/>\r\n\t\t{#if show_size}\r\n\t\t\t<input\r\n\t\t\t\taria-label=\"Brush radius\"\r\n\t\t\t\tbind:value={brush_radius}\r\n\t\t\t\ttype=\"range\"\r\n\t\t\t\tmin={0.5 * (img_width / width)}\r\n\t\t\t\tmax={75 * (img_width / width)}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t</span>\r\n\r\n\t{#if true}\r\n\t\t<span class=\"col\">\r\n\t\t\t<IconButton\r\n\t\t\t\tIcon={Color}\r\n\t\t\t\tlabel=\"Select brush color\"\r\n\t\t\t\ton:click={() => (show_col = !show_col)}\r\n\t\t\t/>\r\n\t\t\t{#if show_col}\r\n\t\t\t\t<input\r\n\t\t\t\t\taria-label=\"Brush color\"\r\n\t\t\t\t\ton:change={() => {\r\n\t\t\t\t\t\tif (mode === \"mask\") dispatch(\"redraw\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tbind:value={brush_color}\r\n\t\t\t\t\ttype=\"color\"\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t</span>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\ttop: var(--size-10);\r\n\t\tright: var(--size-2);\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: var(--spacing-sm);\r\n\t\tz-index: var(--layer-5);\r\n\t}\r\n\t.brush {\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t.brush input {\r\n\t\tposition: absolute;\r\n\t\ttop: 3px;\r\n\t\tright: calc(100% + 5px);\r\n\t}\r\n\r\n\t.col input {\r\n\t\tposition: absolute;\r\n\t\tright: calc(100% + 5px);\r\n\t\tbottom: -4px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\t// @ts-nocheck\r\n\timport { createEventDispatcher, tick, onMount } from \"svelte\";\r\n\timport { BlockLabel } from \"@gradio/atoms\";\r\n\timport { Image, Sketch as SketchIcon } from \"@gradio/icons\";\r\n\r\n\timport Cropper from \"./Cropper.svelte\";\r\n\timport Sketch from \"./Sketch.svelte\";\r\n\timport Webcam from \"./Webcam.svelte\";\r\n\timport ModifySketch from \"./ModifySketch.svelte\";\r\n\timport SketchSettings from \"./SketchSettings.svelte\";\r\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\r\n\t// import Json from \"packages/icons/src/JSON.svelte\";\r\n\r\n\texport let value:\r\n\t\t| null\r\n\t\t| string\r\n\t\t| { image: string | null; mask: string | null };\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label: boolean;\r\n\r\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\r\n\texport let tool: \"editor\" | \"select\" | \"sketch\" = \"editor\";\r\n\texport let shape: [number, number];\r\n\texport let streaming: boolean = false;\r\n\texport let pending: boolean = false;\r\n\texport let mirror_webcam: boolean;\r\n\texport let brush_radius: number;\r\n\r\n\tlet sketch: Sketch;\r\n\tlet cropper: Cropper;\r\n\r\n\tlet prevValue = \"\";\r\n\tlet isUpload = false;\r\n\r\n\tif (\r\n\t\tvalue &&\r\n\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\ttool === \"sketch\"\r\n\t) {\r\n\t\tvalue = { image: value as string, mask: null };\r\n\t}\r\n\r\n\tfunction handle_upload({ detail }: CustomEvent<string>) {\r\n\t\tif (tool === \"color-sketch\") {\r\n\t\t\tstatic_image = detail;\r\n\t\t} else {\r\n\t\t\tvalue =\r\n\t\t\t\t(source === \"upload\" || source === \"webcam\") && tool === \"sketch\"\r\n\t\t\t\t\t? { image: detail, mask: null }\r\n\t\t\t\t\t: detail;\r\n\t\t}\r\n\t\tisUpload = true;\r\n\t\tconsole.log(1);\r\n\t\tdispatch(\"upload\", detail);\r\n\t}\r\n\r\n\tfunction handle_clear({ detail }: CustomEvent<null>) {\r\n\t\tvalue = null;\r\n\t\tstatic_image = undefined;\r\n\t\tdispatch(\"clear\");\r\n\t}\r\n\r\n\tasync function handle_save(\r\n\t\t{ detail }: { detail: string },\r\n\t\tinitial,\r\n\t\tchange = false\r\n\t) {\r\n\t\tif (mode === \"mask\") {\r\n\t\t\tif (source === \"webcam\" && initial) {\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\timage: detail,\r\n\t\t\t\t\tmask: null\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\timage: typeof value === \"string\" ? value : value?.image || null,\r\n\t\t\t\t\tmask: detail\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\t\ttool === \"sketch\"\r\n\t\t) {\r\n\t\t\tvalue = { image: detail, mask: null };\r\n\t\t} else {\r\n\t\t\tif (prevValue === \"\") {\r\n\t\t\t\tprevValue = detail;\r\n\t\t\t}\r\n\t\t\tvalue = detail;\r\n\t\t}\r\n\t\tawait tick();\r\n\t\tdispatch(streaming ? \"stream\" : \"edit\");\r\n\t}\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string | null;\r\n\t\tstream: string | null;\r\n\t\tedit: undefined;\r\n\t\tclear: undefined;\r\n\t\tdrag: boolean;\r\n\t\tupload: FileData;\r\n\t}>();\r\n\r\n\t$: dispatch(\"change\", value as string);\r\n\r\n\tlet dragging = false;\r\n\r\n\t$: dispatch(\"drag\", dragging);\r\n\r\n\tfunction handle_image_load(event: Event) {\r\n\t\tconst element = event.currentTarget as HTMLImageElement;\r\n\t\timg_width = element.naturalWidth;\r\n\t\timg_height = element.naturalHeight;\r\n\t\tcontainer_height = element.getBoundingClientRect().height;\r\n\t}\r\n\r\n\tasync function handle_sketch_clear() {\r\n\t\tsketch.clear();\r\n\t\tawait tick();\r\n\t\tvalue = null;\r\n\t\tstatic_image = undefined;\r\n\t\tprevValue = \"\";\r\n\t\tisUpload = false;\r\n\t}\r\n\r\n\tlet img_height = 0;\r\n\tlet img_width = 0;\r\n\tlet container_height = 0;\r\n\r\n\tlet mode;\r\n\r\n\t$: {\r\n\t\tif (source === \"canvas\" && tool === \"sketch\") {\r\n\t\t\tmode = \"bw-sketch\";\r\n\t\t} else if (tool === \"color-sketch\") {\r\n\t\t\tmode = \"color-sketch\";\r\n\t\t} else if (\r\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\r\n\t\t\ttool === \"sketch\"\r\n\t\t) {\r\n\t\t\tmode = \"mask\";\r\n\t\t} else {\r\n\t\t\tmode = \"editor\";\r\n\t\t}\r\n\t}\r\n\r\n\t$: brush_color = mode == \"mask\" ? \"#000000\" : \"#000\";\r\n\r\n\tlet value_img;\r\n\tlet max_height;\r\n\tlet max_width;\r\n\r\n\tlet static_image = undefined;\r\n\r\n\t$: {\r\n\t\tif (value === null || (value.image === null && value.mask === null)) {\r\n\t\t\tstatic_image = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t$: {\r\n\t\tif (cropper) {\r\n\t\t\tif (value) {\r\n\t\t\t\tcropper.image = value;\r\n\t\t\t\tcropper.create();\r\n\t\t\t} else {\r\n\t\t\t\tcropper.destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonMount(async () => {\r\n\t\tif (tool === \"color-sketch\" && value && typeof value === \"string\") {\r\n\t\t\tstatic_image = value;\r\n\t\t\tawait tick();\r\n\t\t\thandle_image_load({ currentTarget: value_img });\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<BlockLabel\r\n\t{show_label}\r\n\tIcon={source === \"canvas\" ? SketchIcon : Image}\r\n\tlabel={label || (source === \"canvas\" ? \"Sketch\" : \"Image\")}\r\n/>\r\n\r\n<div\r\n\tclass:fixed-height={source !== \"webcam\" ||\r\n\t\ttool === \"sketch\" ||\r\n\t\ttool === \"color-sketch\"}\r\n\tdata-testid=\"image\"\r\n\tbind:offsetHeight={max_height}\r\n\tbind:offsetWidth={max_width}\r\n>\r\n\t{#if source === \"upload\"}\r\n\t\t<Upload\r\n\t\t\tbind:dragging\r\n\t\t\tfiletype=\"image/*\"\r\n\t\t\ton:load={handle_upload}\r\n\t\t\tinclude_file_metadata={false}\r\n\t\t\tdisable_click={!!value}\r\n\t\t>\r\n\t\t\t{#if (value === null && !static_image) || streaming}\r\n\t\t\t\t<slot />\r\n\t\t\t{:else if tool === \"select\"}\r\n\t\t\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n\t\t\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n\t\t\t{:else if tool === \"editor\"}\r\n\t\t\t\t<ModifyUpload\r\n\t\t\t\t\ton:edit={() => (tool = \"select\")}\r\n\t\t\t\t\ton:clear={handle_clear}\r\n\t\t\t\t\teditable\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={value}\r\n\t\t\t\t\talt=\"\"\r\n\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t/>\r\n\t\t\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n\t\t\t\t{#key static_image}\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tbind:this={value_img}\r\n\t\t\t\t\t\tclass=\"absolute-img\"\r\n\t\t\t\t\t\tsrc={static_image || value.image || value}\r\n\t\t\t\t\t\tdata-source={prevValue}\r\n\t\t\t\t\t\tdata-isupload={isUpload}\r\n\t\t\t\t\t\talt=\"load-2\"\r\n\t\t\t\t\t\ton:load={handle_image_load}\r\n\t\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{/key}\r\n\t\t\t\t{#if img_width > 0}\r\n\t\t\t\t\t<Sketch\r\n\t\t\t\t\t\t{value}\r\n\t\t\t\t\t\tbind:this={sketch}\r\n\t\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\t\ton:change={handle_save}\r\n\t\t\t\t\t\ton:redraw={sketch.redraw()}\r\n\t\t\t\t\t\t{mode}\r\n\t\t\t\t\t\twidth={img_width || max_width}\r\n\t\t\t\t\t\theight={img_height || max_height}\r\n\t\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\t\t{value_img}\r\n\t\t\t\t\t\t{source}\r\n\t\t\t\t\t\t{shape}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ModifySketch\r\n\t\t\t\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\t\t\t\ton:redraw={() => sketch.redraw()}\r\n\t\t\t\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n\t\t\t\t\t\t<SketchSettings\r\n\t\t\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\t\t\ton:redraw={sketch.redraw()}\r\n\t\t\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t\t\t\t\t{mode}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t{/if}\r\n\t\t\t{:else}\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={value.image || value}\r\n\t\t\t\t\talt=\"hello\"\r\n\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t</Upload>\r\n\t{:else if source === \"canvas\"}\r\n\t\t<ModifySketch\r\n\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\ton:redraw={() => sketch.redraw()}\r\n\t\t\ton:clear={handle_sketch_clear}\r\n\t\t/>\r\n\t\t{#if tool === \"color-sketch\"}\r\n\t\t\t<SketchSettings\r\n\t\t\t\tbind:brush_radius\r\n\t\t\t\tbind:brush_color\r\n\t\t\t\ton:redraw={sketch.redraw()}\r\n\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t\t<Sketch\r\n\t\t\t{value}\r\n\t\t\tbind:brush_radius\r\n\t\t\tbind:brush_color\r\n\t\t\tbind:this={sketch}\r\n\t\t\ton:change={handle_save}\r\n\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t{mode}\r\n\t\t\twidth={img_width || max_width}\r\n\t\t\theight={img_height || max_height}\r\n\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t{shape}\r\n\t\t/>\r\n\t{:else if (value === null && !static_image) || streaming}\r\n\t\t{#if source === \"webcam\" && !static_image}\r\n\t\t\t<Webcam\r\n\t\t\t\ton:capture={(e) =>\r\n\t\t\t\t\ttool === \"color-sketch\"\r\n\t\t\t\t\t\t? handle_upload(e)\r\n\t\t\t\t\t\t: handle_save(e, true, \"pizda\")}\r\n\t\t\t\ton:stream={handle_save}\r\n\t\t\t\ton:error\r\n\t\t\t\t{streaming}\r\n\t\t\t\t{pending}\r\n\t\t\t\t{mirror_webcam}\r\n\t\t\t/>\r\n\t\t{/if}\r\n\t{:else if tool === \"select\"}\r\n\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\r\n\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\r\n\t{:else if tool === \"editor\"}\r\n\t\t<ModifyUpload\r\n\t\t\ton:edit={() => (tool = \"select\")}\r\n\t\t\ton:clear={handle_clear}\r\n\t\t\teditable\r\n\t\t/>\r\n\r\n\t\t<img\r\n\t\t\tsrc={value}\r\n\t\t\talt=\"\"\r\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t/>\r\n\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\r\n\t\t{#key static_image}\r\n\t\t\t<img\r\n\t\t\t\tbind:this={value_img}\r\n\t\t\t\tclass=\"absolute-img\"\r\n\t\t\t\tsrc={static_image || value?.image || value}\r\n\t\t\t\talt=\"load-1\"\r\n\t\t\t\ton:load={handle_image_load}\r\n\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t\t/>\r\n\t\t{/key}\r\n\t\t{#if img_width > 0}\r\n\t\t\t<Sketch\r\n\t\t\t\t{value}\r\n\t\t\t\tbind:this={sketch}\r\n\t\t\t\tbind:brush_radius\r\n\t\t\t\tbind:brush_color\r\n\t\t\t\ton:change={handle_save}\r\n\t\t\t\t{mode}\r\n\t\t\t\twidth={img_width || max_width}\r\n\t\t\t\theight={img_height || max_height}\r\n\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t{value_img}\r\n\t\t\t\t{source}\r\n\t\t\t/>\r\n\t\t\t<ModifySketch\r\n\t\t\t\ton:undo={() => sketch.undo()}\r\n\t\t\t\ton:redraw={() => sketch.redraw()}\r\n\t\t\t\ton:clear={handle_sketch_clear}\r\n\t\t\t/>\r\n\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\r\n\t\t\t\t<SketchSettings\r\n\t\t\t\t\tbind:brush_radius\r\n\t\t\t\t\tbind:brush_color\r\n\t\t\t\t\tcontainer_height={container_height || max_height}\r\n\t\t\t\t\timg_width={img_width || max_width}\r\n\t\t\t\t\timg_height={img_height || max_height}\r\n\t\t\t\t\t{mode}\r\n\t\t\t\t/>\r\n\t\t\t{/if}\r\n\t\t{/if}\r\n\t{:else}\r\n\t\t<img\r\n\t\t\tsrc={value.image || value}\r\n\t\t\talt=\"\"\r\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\r\n\t\t/>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.fixed-height {\r\n\t\theight: var(--size-60);\r\n\t}\r\n\r\n\timg {\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.absolute-img {\r\n\t\tposition: absolute;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.webcam {\r\n\t\ttransform: scaleX(-1);\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher } from \"svelte\";\r\n\timport { BlockLabel, Empty, IconButton } from \"@gradio/atoms\";\r\n\timport { Download } from \"@gradio/icons\";\r\n\r\n\timport { Image } from \"@gradio/icons\";\r\n\r\n\texport let value: null | string;\r\n\texport let label: string | undefined = undefined;\r\n\texport let show_label: boolean;\r\n\r\n\tconst dispatch = createEventDispatcher<{\r\n\t\tchange: string;\r\n\t}>();\r\n\r\n\t$: value && dispatch(\"change\", value);\r\n</script>\r\n\r\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\r\n{#if value === null}\r\n\t<Empty size=\"large\" unpadded_box={true}><Image /></Empty>\r\n{:else}\r\n\t<div class=\"download\">\r\n\t\t<a\r\n\t\t\thref={value}\r\n\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\r\n\t\t\tdownload={\"image\"}\r\n\t\t>\r\n\t\t\t<IconButton Icon={Download} label=\"Download\" />\r\n\t\t</a>\r\n\t</div>\r\n\t<img src={value} alt=\"\" />\r\n{/if}\r\n\r\n<style>\r\n\timg {\r\n\t\twidth: var(--size-full);\r\n\t\theight: var(--size-full);\r\n\t\tobject-fit: contain;\r\n\t}\r\n\r\n\t.download {\r\n\t\tposition: absolute;\r\n\t\ttop: 6px;\r\n\t\tright: 6px;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Image, StaticImage } from \"@gradio/image\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { _ } from \"svelte-i18n\";\n\timport { Component as StatusTracker } from \"../StatusTracker/\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport type { Styles } from \"@gradio/utils\";\n\timport UploadText from \"../UploadText.svelte\";\n\n\texport let elem_id: string = \"\";\n\texport let elem_classes: Array<string> = [];\n\texport let visible: boolean = true;\n\texport let value: null | string = null;\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" = \"editor\";\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let streaming: boolean;\n\texport let pending: boolean;\n\texport let style: Styles = {};\n\texport let mirror_webcam: boolean;\n\texport let shape: [number, number];\n\texport let brush_radius: number;\n\n\texport let loading_status: LoadingStatus;\n\n\texport let mode: \"static\" | \"dynamic\";\n\n\tconst dispatch = createEventDispatcher<{ change: undefined }>();\n\n\t$: value, dispatch(\"change\");\n\tlet dragging: boolean;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\n\t\t? \"dashed\"\n\t\t: \"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\tstyle={{ height: style.height, width: style.width }}\n\tallow_overflow={false}\n>\n\t<StatusTracker {...loading_status} />\n\t{#if mode === \"static\"}\n\t\t<StaticImage {value} {label} {show_label} />\n\t{:else}\n\t\t<Image\n\t\t\t{brush_radius}\n\t\t\t{shape}\n\t\t\tbind:value\n\t\t\t{source}\n\t\t\t{tool}\n\t\t\ton:edit\n\t\t\ton:clear\n\t\t\ton:change\n\t\t\ton:stream\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tloading_status = loading_status || {};\n\t\t\t\tloading_status.status = \"error\";\n\t\t\t\tloading_status.message = detail;\n\t\t\t}}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\t{mirror_webcam}\n\t\t>\n\t\t\t<UploadText type=\"image\" />\n\t\t</Image>\n\t{/if}\n</Block>\n","export { default as Component } from \"./Image.svelte\";\nexport { default as ExampleComponent } from \"../Dataset/ExampleComponents/Image.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: {\n\t\tpayload: \"string\"\n\t},\n\tdescription: {\n\t\tpayload: \"image data as base64 string\"\n\t},\n\texample_data:\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==\"\n});\n"],"names":["ResizeObserver","SketchIcon"],"mappings":"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"}